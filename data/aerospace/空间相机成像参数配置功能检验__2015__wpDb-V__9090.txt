空间相机成像参数配置功能检验
介绍了空间相机成像参数配置的基本组成和作用,讨论了成像参数配置功能缺陷对相机成像质量的影响,应用数学方法分析了成像参数配置功能抽样检验的测试风险。基于自动测试系统,提出了一种空间相机成像参数配置功能全面检验的方法来解决测试覆盖性和测试效率之间的矛盾。应用本文提出的测试系统和检验方法对空间相机成像参数配置功能进行了全面检验。结果表明：本方法实现了成像参数配置功能的100%覆盖检验；每条参数测试判读时间缩短为40ms；完成相机成像参数全面检验的测试时间大约为50min。该方法能够有效测试出成像参数配置功能故障,满足了空间相机高效测试、零质量缺陷的要求。

空间相机 成像参数配置 功能检验 抽样测试  

Verification of setting function for imaging parameters of space camera
GU Ying-ying" ?* , SHEN Xiang-heng', MA Jun', HUO Jin-ming2“*,LI Jing-qiu', GE Xin-hong'
(1. Changchun Institute of Optics, Fine Mechanics and Physics, Chinese Academy of Sciences,
Changchun 130033, China;2. University of Chinese Academy of Sciences, Beijing 100049, China;
3. Guanghua College ,Changchun University , Changchun 130031, China)
% Corresponding author , E-mail :18686681605 @163. com
Abstract: The basic composition and functions of imaging parameters of a space camera were intro-
duced. The impact of defective imaging parameter
values on the imaging quality was analyzed and the
risk of sampling test method for imaging parameter setting was analyzed by applying the mathematical
method. On an automatic testing system, a method and a system to achieve a comprehensive verifica-
tion for setting imaging parameters were proposed to solve the contradiction between test coverage and
test efficiency. The method and the system were used to verify the functions of imaging parameter set-
ting of the space camera. Experiment result shows
that the proposed method can realize a comprehen-
sive verification for setting imaging parameters of the camera, the test time is shortened to 40 ms for
each test case and that is about 50 min for all systems. The method is able to effectively verify the
function of setting imaging parameters and can meet the test requirements of zero quality defects.
1“引“言
空间相机是搭载在卫星等航天平台上的利用
光学手段获取地面或空间感兴趣目标图像信息的
绊合性光机仪器“。目前,国内外高分辨率相机
多为以时间延时积分(TimeDelayIntegration,
TDDCCD为探测器的光电传输型相机“。这种
相机的优点在于成像系统的体积和重量小,信噪
比高、动态范围大、不需要相机回收就可以得到图
像信息等“““。另外,为了提高成像质量,扩大动
态范围以及增大信噪比,相机的成像参数,如积分
级数、行转移时间、增益、偏置等通常都可调“。
这种灵活的成像参数配置能力有利于空间相机研
制调试中的试验和定标“01。
空间相机的成像参数配置是否合理直接决定
相机成像质量的好坏,因此它成为空间相机质量
控制的关键检验点之一。空间相机成像参数配置
的检验主要涉及两方面内容,一是空间相机的成
像参数在预定的参数范围内是否能够正确配置到
相机控制器中;二是相机控制器能否根据故障策
略识别非预期成像参数,并拒绝配置参数。长期
以来,由于空间相机可配置的成像参数较多昆范
围较大,如何兼顾检验效率和检验质量是检验成
像参数配置的难点。传统的成像参数检验方法主
要依据国家标准《计数抽样检验程序》,根据待检
相机成像参数的数量设计抽样检验方法,人工发
送相机成像参数配置命令,对抽出的成像参数逐
条测试。然而,对于高成本、高可靠性要求的空间
相机来说,这种抽样检验方法存在很大的检验风
险、而且成像参数配置故障将导致相机成像异
常,严重影响相机的成像质量。为解决这一问题,
必须研究空间相机集成测试技术0。
本文介绍了空间相机成像参数的基本组成,
讨论了成像参数配置故障对空间相机成像质量的
影响,应用数理统计厚理分析了抽样检验方法的
检验风险,并详绍给出了基于自动测试系统的成
像参数配置检验方法及其系统实现。
2“空间相机成像参数检验
2.1成像参数的组成及作用
空间相机的成像参数配置一般由积分级数、
行转移时间、增益、偏置等参数组成,如图1所示。
其中,积分级数和行转移时间两个参数用于控制
TDICCD芯片的特性;增益和偏置参数用于控制
图 像 信号处理器的特性。积分级数为TDICCD
对某个物点曜光叠加的次数,一般的TDICCD器
件有96个级数。空间相机通过调整级数可以实
现低照度目标的成像,提高相机的信噪比。行转
移时间用来匹配像移速度,最终形成清晰的延迟
积分图像。调节增益参数可以使CCD信号在不
同的光照强度下仍然处在模数转换的量程范围
内,避免图像太暗或者饱和““1。偏置参数用来调
整经相关双采样后CCD模拟信号的直流分量
水平。
TDICCD cameras
2.2成参数配置故障对相机成像质量的影晕
在相机研制过程中,如不对空间相机的成像
参数配置进行充分的检测验证,将给相机在轨成
像带来严重的影响,主要表现在以下两个方面
(1)预期成像参数值不能被相机控制器解析
注人,使成像质量下降。如图2所示,左侧为在最
图 2 最优增益设置前后成像质量的比较
Fig. 2 Comparison of imaging qualities between correct
and incorrect setting optimum gains
优增益值上的遥感图像;右侧为增益成像参数配
罡功能异常,导致最优增益值不能配置给相机时
的选感图佳。
(2)预期成像参数值被相机控制器错误解析
注入,使成像状态与预期不符。这一问题将影响
相机的控制功能,给用户操作带木困难。如图3
所示,图3(a)为菪相机地面定标时栋片CCD的
行转移时间参数解析错误产生的图像,其灰度与
其他CCD不一致;3(b)、36c)分别为桅相机在执
成像时咕个视频处理咤偏置参数、增益参数解析
错误时拍摄的遥感图像。
图 3 菜片CCD不闭错误方式解析的在转图像
Fig.3 On orbit images captured by CCD with differ-
ent incorrect interpretations
2.3成像参数测试约束
将成像参数的测试集记为;
A= {ala=2"―-1}, oh
养中:x为成像参数配置的占用位宾。
成像参数君配置集记为;
O一to|可设罡的成像参数值}:、《2)
成像参敬不可炳置集记为,
N=tn|无姚参数值}.(3
则成像配置参数集A;O,MN满足如下关泵;
相机的成像参数配罪应满足妮下约束关系:
(1)O中所有的可设置参数值o均司被相机
正确配置解析;
(2)N中所有的无效参数值x不能被相机配
置解析。
2.4成像参数配置检验
成像参数配置的检验方法主要有两种,即全
面检验和抽样检验I4。全面检验要求对成像参
数测试集A中的每个参数值逐一测试验证,确保
每个参数值均满足测试约林关系。该方法可以实
现成像参数配置功能的无遗溥检验,但是需要人
工注入鸿试用恬,其效率太低,难以满足检验屈期
的要求。因此常闯拖样检验方法验诛空间相机成
像参数的配置加能,即选取一定样本的娆像参数
值进行检验,根据样本测试结果判定成像参数配
置是否合格。
设一批待检的成像参数状态总数量为N,有
问题的参数值数量为,则有问题的参数值占全
部参数值的比率5二m/N。抽样测试的参数值数
量为x,在中发现了&个有问题的参数值。当
&不大于检验合格接收判定数A.时,判定许像参
数配髯合格。判定合格的椿率(服从超几何
BAH,
人心0
式(5)表明,拙样检验方法中,当其他参数不
变时,判定成像参数配置为合格的概率与成像参
数中实际的不合格参数借比率具有函数关系。图
4所示为某待检成像参数状态总数量为1000,抽
取40个参数值进行检验的抽样特性曲线。如果
有一个参数值不满足测试集约柱,就判定其成像
参数配置不合格。从图4可以看出,待检成像参
数状态值中不符合要求的参数值比例5越高,成
像参数酒置被判定为不合格的概率就越大。
星然,抽样检验成像参数配置的方法不能满
足空间光学遥感设备笃质量缺陷的要求。当大量
的成像参数状态借中只有极少数状态值不符合要
求时,座用抽样检验方法很难发现相机成像参数
的错误配置,误判的风险很大。一邦这些极少数
的成像参数状态值配置到相机中x将发生配罪故
障,严重影响空伺相机的成像质量。因此本文提
出了基于自动测试系统的空间相机成像参数配置
的全面检验方法。
Percentage of incorrect imaging parameter (p)
图 4 桅批成像参数测试抽样特性曲线
Fig. 4 OC curve of a batch of imaging configuration
parameters
3“系统设计
3.1“成像参数测试范围
空间相机成像参数的配置一般利用某种通信
总线按照特定的通信协议,由主控计算机将参数
注入相机控制器。通信帧通常包括帧头,指令.成
像参数,校验和帧尾等,如图5所示。成像参数配
置的全面检验就是要对参数占用位宽范围内的全
部参数进行测试,有效参数相机控制器应能正确
配置参数,无效参数和无效位宽上的参数相机控
制器均不予响应。
MEE 20 EAE PS I I
参数测试范围
图 5 参数配置通信帧结构
Fig. 5 Communication frame for parameter setting
3.2测试系统
如图6所示,测试系统由光源目标、相机、国
像快视、相机控制器、电源系统、总线转换器和主
控计算机组成。其中总线转换器和主控计算机是
测试设备,其他为参试设备。空间相机常用的通
讯总线有CAN、1553B、422、485等,为了提高测
试系统的通用性,总线转换器可以实现相机控制
器与主控计算机间灵活的总线转换。主控计算机
用来实现相机成像参数注人、已配置成像参数的
遥测和数据判读、文件存储等功能。
232,通讯比特率设置为38400bps,每个字节共
传输10bit数据,其中1bic起始位,8bit数据
位,1bit停止位。总线转换器选用Moxa的
TCC-1001,可以实现RS2325RS422间的双向
转换,工作比特率为50bps一921.6Kbps,光电隔
离保护为2kV,ESD保护为15kKV。系统为主
从通讯方式,主控计算机为主机,相机控制器为
从机,成像参数的配置验证总是由主控计算机发
起,相机控制器进行响应。
3.3“通信协议
测试系统的通信协议需要同相机控制器的通
讯华议保持一致,以确保主控计算机与相机控制
器能够正常通信。测试系统具有通信协议配置功
能,能够快速配置出与相机控制器一致的通信测
试协议。
通信协议主要包括帧头、指令、数据、校验帧
尾以及每个元素的字节长度信息等。利用这些元
素可以按照通信协议快速组成通信帧,从而完成
相机成像参数配置的测试,如图7所示。本测试
系统的通信帧主要有成像参数配置通信帧,成像
参数查询通信帧和成像参数返回通信恭3种。成
像参数配置检验的系统通信过程如图8所示,选
择一个待测试的成像参数状态值,配置一条成像
参数配置通信蛤并发送给相机控制器,相机控制
器配置成像参数;然后配置一条成像参数查询通
信帧,向相机控制器查询当前的成像参数值;相机
控制器将一条成像参数返回通信恭,主控计算机
接收成像参数返回通信帧并解析出成像参数值;
最后比较返回的成像参数值与设置的成像参数值
之间的关系是否满足配置预期,判定该成像参数
状态值是吴合格。
图 7 通信帧元素配置
Fig. 7 Element setting for communication frames
设计测试系统软件时,要充分利用计算机高
效的数据通信、处理、判读能力,以实现空间相机
成像参数配置的全面检验。软件根据输人的测试
参数范围,自动完成成像参数测试集中每个元素
成像配置的测试,记录和解析测试中相机控制器
收发的通信帧,完成每个元素测试的判读工作,软
件流程图如图9所示。
软件的初始输人控制参数包括:定时时间、成
像参数类别、成像参数测试的起始值和结束值、成
像参数增长步长、通信比特率等。其中定时时间是
系统测试的关键输人参数,它是系统给予的测试一
条成像参数值的有效时间;定时一到系统即进人下
一条成像参数值的测试工作。为保证系统可靠、高
效地检验成像参数配置,定时时间f可估算为,
卜二2X(h十血十口)(6)
式中:t,为统通信时间,ts为帧数据记录时间,t
为帧数据解析、刻读时间。
本文设计的测试系统已应用于某相机的成像
参数配置检验中。该相机具有积分级数、行转移
时间增益、偏置的设置功能,各个成像参数配置
的占用位宽、有效位宽、有效码值范围以及测试码
值范围如表1所示。由表可知,完成该相机成像
参数配置的全面测试需要进行73984次测试。
-表!成像配置参数
Tab.1 Imaging configuration parameters
积分级数88孛炉:17,34,0一255
68,136,170
行转移时间“16160一655350一65535
增 益 12 10 0 一 767 0 一 4 095
偏 置 12 10 0~1023 0 一 4 095
测试时,通讯波特率设置为38400bps,测试
一条用例的定时时间设置为40ms,这样完成相机
成像参数全面检验的测试时间大约为50min,实
现了空间相机成像参数配置高效、全面的测试。本
文的检验方法与抽样检验方法的测试覆盖率,完
成一条测试用例所需时间的数据详见表2,
表 2 测诙方法对比
Tab. 2 Comparison between proposed and sampling test
methods
测试方法测试码值覆盐率单次测试时间
全面测试100%40ms
一 0. 06%
抽检测访(抽取40个数据)50s
本文提出的全面测试方法还可以测试成像参
数占用位宽的全部参数值,不但能完成成像参数
有效值的测试,而且对占用位宽范围内的无效值
也可以进行测试(即故障模式测试)。
上述实验表明,本文提出的成像参数配置全
面检验方法的测试效率高、覆盖率可达100%,实
现了成像参数占用位宽的有效值和无效值的测
试,全面有效地验证了空间相机的成像参数配置
功能。
5“结“论
本文论述了空间相机成像参数的基本组成和
作用以及成像参数配置功能对相机成像质量的影
响。应用数理统计原理分析了抽样检验成像参数
配置的测试风险,提出了一种全面检验成像参数
的自动测试系统并给出了系统的设计实现,从而
解决了空间相机的成像参数配置全面检验的问
题。实验结果表明,该测试方法测试一条用例的
时间仅为40ms,实现了100%的成像参数配置
功能验证,能够满足空间相机高效测试、零质量缺
陷的要求。
