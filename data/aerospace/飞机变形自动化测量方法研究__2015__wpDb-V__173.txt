飞机变形自动化测量方法研究
为解决以往飞机变形测量模式中人工干预较多，受测量环境影响较大，测量时间长等问题，基于GeoCOM技术和RS232，在计算机与全站仪之间进行数据交换，设计了一套自动化测量系统。在测量过程中由标志点的机体理论坐标反算其在当前测站中的极坐标，从而在测量过程中驱动全站仪指向待测点，减少人工瞄准时间，并由计算机实时解算结果数据。经实际飞行试验验证表明，测量时间缩短为原来时间一半，大大提高了工作效率。

结构变形 全站仪 飞行试验 光学测量 GeoCOM RS232  

0“引言
随着计算机技术、网络通信技术的飞速发展,航空
电子设备的复杂程度日益提高。航空电子设备对消息
的实时性要求较高,且随着航空电子设备性能的提高和
功能的多样化,总线承担的数据传输任务也更为繁重,
传统的测试系统已经不能满足现今设备发展的需要。
因此自动测试系统(AutomaticTestSystem,ATS)已经成
为先进航空电子系统与设备可靠运行的必要保障。
为了提高测试系统的效率并使测试满足某性能
指标的要求,需要对测试任务序列进行有效调度。文献
[1]证明这类问题为NP问题,无法通过传统的线性规
划等方法进行求解,目前,部分研究先采用Petri网建
立任务调度的模型,后根据模型信息进行优化;文献
[2]把Petri网运用到测试系统的分析设计中,对测试
流程进行调度。但是其复杂度较高,可操作性差,更多
研究使用启发式算法,寻找近似最优解;文献[3j采用
遗传算法对测试任务调度问题进行了研究,但是针对
大带宽多总线嵌人式系统的测试环境,要求在满足总
线消息实时性的前提下平衡总线负载,以满足测试设
备的要求,并提高测试系统的鲁棒性;在文献[4-5]
的研究中,对测试任务调度问题仅考虑了资源约束和
任务优先级约束,并未对实时性和负载均衡进行讨论;
文献[6]中提出了各步平均负载的概念,但未将序列
的实时性能考虑进来。
本文提出了一种基于粒子群算法(ParticleSwarm
Optimization,PS0)的测试消息调度方法,结合现今常
见航空总线的华议特点和总线的资源约束关系,建立
测试消息序列;并对消息的实时性和总线负载的均衡
程度进行衡量。最后,通过对案例的测试仿真,证明该
算法适用于宽带多总线的消息调度,日有良好的表现。
1数学模型
1.1符号定义和情景分析
本文中符号的定义为:Msgi,JHEi,i从0Bln;
B,,总线j从0Blmix, 5Msgi在B上传输,则x,=
1,否则xy=050,BERj的传输速率;p,Msg;的重要
性;scalei,Msg;对应的时间寓口;s:,Msg5时间窗口的
开始时间;x:,Msgi在时间窗口内开始发送的时间;1,
Msgi长度;f,Msgi在总线B,经过封装后的长度;4:,
Msgi时间窗口的截止时间;r:;,Msgi发送结束后时间
窗口的剩余时间;t,Msg;发送时占用总线的时长;乙,
总线B,调度周期的可用时长。
考虑以下儿种情景。
1)航空总线上的消息分为周期性消息和非周期
性消息。两类消息都需要实时性能保障,同时,周期性
消息要保证周期特性。因此,每条消息均有一个发送
.时间窗口:若早于此窗口,消息内容可能还未填充,导
致消息内容的错误;若迟于此窗口,消息未能及时发
送,实时性无法得到保障,周期性被破坏。
2)每条总线的协议标准不同,消息分配到不同的
总线后,封装得到的数据块的格式和长度也不同;同
时,不同的总线有各自的发送机制和调度规则,故总线
可使用的时间段也不同。
3)每条消息都有可能分配到不同的总线发送,周
期性消息也可能分配到不吟的总线,未经优化的消息
调度规则可能造成某总线在某时间段内过于拥挤。
4)由于资源约束,每条总线上消息的发送时间不
AEE,
目标是获得一种消息的分发方案,在满足资源约
束的前提下,使得系统内消息的实时性最强,不同总线
的负载相对均衡。本调度系统中,参考航空总线协议
中的方法,将栋段时间作为周期,在周期内将消息进行
分发,并重复此周期。
1.2“实时性能保随
将每条消息发送结束后,距离该消息截止期限的
时间段称为可调度时间,作为衡量消息实时性能的指
标,该时间段越长,则消息的实时性保障越好。消息分
发方案工可表示为
其中,Msgi的发送时间窗口为scalei,时间窗口的全局
开始时间为sit,消息在时间窗口内开始发送的时间为u,
若消息在总线B,上发送,则发送时占用总线的时长
则消息Msg;发送结束后,距离截止时间还有
二面一山一一(3)
剩余时间越长,则消息的实时性保障越好。
在调度的过程中,可能会遇到不同消息在同一时
间申请发送的情况,此时两条消息需要先后发送,则后
发送的消息实时性能就会被一定程度减弼,而每条消
息的重要性不同,因此定义了消息重要性p:,衡量调度
方案对系统稳定性的影响。对整个系统,所有消息的
可调度时间和为
其中,p;为消息Msg;的重要性,重要性越大,p的值越
大,其可调度时间在系统可调度时间和中所占的比重
越大。
1.3“总线负载均衡
消息分发后,为了在充分利用总线资源的基础上平
衡总线间的负载,定义系统总线负载均衡度。在一个大
周期内,以总线的占用时间来衡量总线的负载,用各总
线占用时间的方差来衡量总线负载的均衡度。同样,对
消息分发方案,消息Msgi发送时占用总线的时间为
对总线B,,其负载为
对力条总线,其平均负载为
则系统的负载均衡度为所有总线负载的方差
方差可以衡量各总线负载的差异程度,方差越大说明
负载的差距越大,不利于保障高负载总线上消息的实
时性;方差越小说明负载均衡度越高,可以充分利用多
总线资源,有利于消息的实时性保障。
2“资源限制和消息封装
在多总线任务调度模型中,在考虑实时性能保障
和总线负载均衡的基础上,还需要将资源限制和由总
线协议规定的消息封装格式作为调度方案性能评价的
影响因子。
首先,模型中只规定了消息分配的总线,未规定在
时间窗口中哪个时刻发送。为了保证消息的实时性,
希望每条消息的可调度时间最大化,故每条消息都应
在时间窗口的开始时刻发送。但是如果若干条消息分
配到同一总线发送,旦其时间窗口互有重叠,则在其中
桅些消息的时间窗口开始时刻总线仍被占用,此时需
要将其发送时间推迟,直到总线空闲。
另外,在实际操作中,每种总线的协议不同,对消
息进行封装的方式不同,则同一消息在不同总线封装
结束后得到的数据块长度不同。故此处以&FRMsgi
“在总线j上发送时的消息长度。同时,每种总线均有
各自的同步机制,同步花销并未考虑在算法当中,但是
占用的时间会影响消息发送的实时性。以下以FC总
线和TTE协议为例,讨论这两种总线上的协议花销。
2.1“光纤通道协议
光纤通道(FiberChannel,FC)标准是一种高速略
行传输协议。经过多年的发展,FC技术因具有高速
率、低延迟、低位错率等特性,能够很好地满足新兴航
空电子互连系统的要求,目前已经成为航空电子统一
网络的主要候选协议。
FC 帧 由 帧 起 始 标 记 ( SOF) fi 3k ( Frame Header) 、
恭载荷(Payload)、校验位(CRC)和帧结束标记(EOF)组
成。SOF、CRC和EOF都是由4个字节,即一个传输字
组成。帧头由6个传输字组成,它包括字段描述信息和
帧处理信息等,用来唯一地标识一个帧““。加上可选帧
头信息,负载最多能有328个传输字(2112字节),如图!
所示。
在FC总线上发送时,其长度会变为5=1,+36字节。
2.2 TTE 协 议
TTE ( Time-Trigger Ethernet) , 即 时 间 触 发 以 太 网 ,
为端系统和交换机构建并维护了同步的时间。
在同步操作中被发送和压缩的华议控制恭被称为
所谓的集成帧(integrationframes)。集成帧按照桅个
可配置的周期,即集成循环持续时间被调度和派发。
一个全面的集群循环(clustercycle)包含一个数目可配
置的集成循环,如图2所示“““。而在调度过程中,要
考虑到协议控制帧对消息时间窗口的影响,若时间窗
口与集成恭有重合,则需要对其进行调整,使其在消息
时间窗口中发送。
对上文提出的消息调度问题,一般的解决办法为
使用智能算法寻找近似最优解。本文提出一种基于
PSO的算法来解决消息分发的问题。
PSO 算 法 最 早 由 J Kennedy 和 R C Eberhart 于 20
世纪90年代提出,其源于对鸟群觅食行为的研究。研
究者发现鸟群在飞行过程中经常会突然改变方向,散
开.棣集,其行为不可预测,但其整体总保持一致性,个
体与个体间也保持着最适宜的距离。通过对类似生物
群体的行为的研究,发现生物群体中存在着一种社会
信息共享机制,它为群体的进化提供了一种优势。大
量研究成果表明,该算法操作简便,依赖的经验参数较
少,具有收敛速度快、避免陷人局部最优等优点,已成
功应用于求解多维非线性函数优化、神经网络训练、整
数优化等问题。
3.1“粒子表示
为了使用粒子群优化算法解决消息分发问题,首
先要对消息分发方案进行编码,合适的编码方案会使
算法计算的复杂度大大降低。在本文中,分配方案二
为一个稀疏的矩阵,每个位置为0或1。这种编码方式
效率较低,未能充分利用粒子的空间。因此将第4个
粒子表示为
由于总线共有m条,故p的取值范围为i1,2,...,mi。
3.2“多目标动态粒子群算法
在标准PSO算法中,首先随机产生一组解,每个
解即为一个粒子。每个粒子会以一定速度移动,而速
度会随着该粒子之前的路径和整个种群的路径调整。
在过去的研究中,许多模型已经被提出,本文采用的模
型〔10_l2〕贯豆
Vg 二 功 十 Did +e; 中 氓 中 《Pbea 一 Pig) 十 Ca x R* (ge ~py) (10)
其中:ou为粒子移动的速度,即粒子更新位置时从现在
位置移动的距离;pu为粒子;现在的位置;pu.为局部
最优,即该粒子之前路径上的最佳位置;gu为全局最
优,即种群中所有粒子的最佳位置;R为0到1的随机
数;cic为学习因子;w是惯性权重。
在本算法中,消息的实时性和总线负载的均衡度
为优化的两个目标,故要在标准粒子群算法的基础上
迹行改造,使之适应多目标优化的场景。本文采用了
基于密度距离的多目标粒子群算法,通过精英集中个
体间的距离,动态选择全局最优和个体最优,事实证明
这种方法有利于算法逼近Pareto最优。算法的主要步
骤如下所述。
1)随机初始化粒子和速度,将各粒子作为各自初
始个体最优位置。
2)计算各粒二的适应度函数,并判断名粒子间的
Pareto支配关系,将非劣解加人到精英集中,计算精英
集粒子间的决策空间距离
dig)=‖一左‖。(12)
3)当迭代次数小于最大迭代次数时:
?选择精英集中处在最为稀疑位置的解作为全
局最优解,更新粒子的速度和位置,并对越界粒子进行
重新随机初始化;
@计算每个粒子的适应度函数,并判断其与精英
集中粒子的支配关系,以此为依据剔除精英集中的劣
解,更新精英集;
@若精英集超过最大容量,则剔除处在最为密集
位置的非劣解,直到精英集回到正常大小;
@若粒子当前位置支配其个体最优位置,则进行
更新,若个体最优位置支配当前位置,则保留原个体最
优位置,若当前位置与个体最优位置互不支配,则随机
选择一个作为新的个体最优位置。
4)结束迭代,此时精英集即为非劣解集。
4“实验与仿真
为了测试多目标动态粒二群算法在实际应用中的
效果,本文札用了表1中所示的消息集和总线集作为
测试案例,在Matlab中分别采用本文提出的多目标动
态粒子群算法对测试消息集进行调度,得到非劣解集
和Pareto前沿。
表 1 消息列表
Table 1 Message list
MSG 01 5 3 0 15
To MSGO2 一 20 1 5 65
. 初 SG:03- 15 1 90 135
MSG 04 50 1 “ 140 290
MSC 05 一 0 2 130 160
MSG 06 15 2 350 395
MSGC:07- 2 1 500 575
MSG 08 . 5 3 700 715
MSG 09 30 2 700 79 “
MSG 10 50 〖 850 1000
MSG 11 5 3 1150 1165
MSG 12. - 10. . , 3 1300 1330
MSG 13 5 3 1305 1320
MSG 14 25 2 1400 1475
MSG15 ~~ 30 1 1560 1650
MSG 16 . 20 2 1750 ? 1810
MSG 17 30 1 1900 1990
MSG 18 5 1 1920 1935
MSG 19 15 2 2100 2145
MSG 20 15 3 2200 2245
测试中使用的总线采用了4条已经较为成熟或正
在发展中的先进的航空总线协议,分别为TTE总线、
1394总线和两条FC总线。这些总线传议的通信速率
如表2所示。
表 2 总线列表
Table 2 Bus list
总线协议总线编号通信速率/(Cb,s71)
FC1 「 BUS1 1
FC2 BUS2 1
1394 “ BUS3 0.8
TTE BUS4 1
当采用的总线速率较为接近时,使用调度算法可以
得到较为理愚的调度结果。使用本文中的粒子群优化算
法,粒子数设为100,精英集大小为200,迭代次数为100,
得到一组非劣解集和Pareto前沿如图3~图4所示。
(26,0.000863 ) (29,0. 000861), (127,0.00086) ) (267,
0.000859) ) , (442 ,0. 000857) ) ,(610,0.000857 ) (854,
0.000856 ) ,( 1106,0. 000855 ) ,( 1401, 0. 000834 ) ,( 1656,
0.000853), (1986,0.000852) , (2342,0. 000851 ) , (3697,
0.00085) ,(3864 ,0. 000848 ) (4156,0. 000847) 。 通 过 对
比,选择(6.25,0.000862)作为最优解并作出调度甘特
图 , 如图5所示。
均在时间窗口的起始时间处发送,且在截止时间前均
无其他消息抢占总线,故对消息的实时性保障较强。
该解在总线负载均衡和实时性保障能力方面符合预
期,能够很好地解决多总线测试任务的调度问题。
5“结束语
为了保障多总线测试系统的消息实时性,并平衡
各总线的负载,本文提出一种基于动态多目标粒子群
算法的调度方法,在满足总线资源限制并结合总线协
议特征,将消息可调度时间和及总线负载方差作为优
化目标,建立测试消息序列。实验仿真证明,通过该种
方法建立的测试序列,在总线负载和消息实时性之间
做出平衡,能够满足高实时性要求下的多总线测试系
统的需求。
