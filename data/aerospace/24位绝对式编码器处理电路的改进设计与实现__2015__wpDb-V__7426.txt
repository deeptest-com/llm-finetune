24位绝对式编码器处理电路的改进设计与实现
鉴于外场环境和专项试验对绝对式编码器的稳定性要求越来越高,对传统的绝对式编码器处理电路进行了技术改进。该处理电路全部采用A/D转换器采集放大与整形之后的模拟信号,通过软件完成光电信号的比较、细分、译码、校正、平均和参数整定等功能,实现了把轴角实际转动的角度值转换成自然二进制数字代码。经实际项目论证,该编码器运行稳定。

光电轴角编码器 DSP 码道 编码器分辨率 光强补偿  

0引言
24位绝对式编码器是集光,机、电于一体的数字
式测角装置。具有分辨率高码盘上每个位置的角度
确定不变、抗干扰能力强、断电后再工作不需要重新标
定等优点“““,被广泛应用于光电经纬仪,完成仪器的
测角和测速功能。2000年以来,研制的24位绝对式编
码器的数据处理系统是通过电阻采样的方法采集编码
器光学系统的光电信号,把轴的转角变换成二进制代
码,以光电信号形式表示,绅逻辑电路进行放大、比较、
存储、信频、译码,校正和组合等处理,变成自然二进制
代码输出。但是,在实际使用过程中由于工作环境恶
劣,温度差异大,光源衰凑等因素的影响,轴角编码器
输出的光电流信号幅值易发生变化,需要定期进行人
工调试。调试方法是以一个固定的比较电平为基准木
调整各路信号,忽略了信号之间的光电流强度的差异,
不具备实用性。在调试各码道输出信号的幅值时,采
用螺丝刀手动调节各路电位计和观察示波器波形变化
来实现所需各路信号的占空比,不仅工作效率低,而门
输人的信号幅值误差大,将导致后续的译码误差增大。
因此,传统的数据处理系统无法适应绝对式码盘信号
强度随环境温差改变和照明光源老化等产生的变化,
导致电路使用寿命降低。
本文提出对绝对式编码器的处理电路,译码方法
和对外接口等部分进行技术改进,改进后的电路设计
合理,实现了绝对式编码器系统的广泛通用性环境适
应性和可靠性,满足光电经纬仪长期参试要求。
1“处理电路的改进设计
1.1“码盘的编码方式
编码命分为绝对式和增量式两种。码盘是轴角编
码器测角的主要元件,圆周360“角度由码道分开,绝对
式码盘有多条码道,如囹1所示。每条码道依靠透光
(图中白色)和不透光(图中黑色)把圆周分成若干等
分,并采用格雷码.阶梯码和通圈形式刻划。该编码方
式的特点为:1)第1圈粗码A,和第2圈粗码4,均刻一
条线,弧长为半圈,相位错开90“;2)第3圈4,起,每团
刻线数为2“““;3)第n圈码道的亮区中心位于第n+1
团码道的暗区中心;4)码道刻划从里向外为粗码、
通阎、中精码和精码;5)该码盘为直径254mm,BE
12mm的环形玻璃圆盘。
对零点;缺点是不能直接进行运算处理,需要转换成自
然二进制代码。目前我国的大型光电经纬仪多数采用
此种编码方式。
1.2“改进设计的思路
码盘输出的码道信号有粗码(A码),中精码(G5
码J码和F码),精码(C码)和通圈(T)信号,它们的波
形依次为方波、梯形波,似正弦波、正弦波和高低电
平““,传统的处理方法是通过硬件电路进行鉴幅。粗
码与固定电平做比较,将方波和梯形波放大并整形为
占空比为1:1的方波;中精码与通园做比较,将梯形波
和似正弦波放大并整形为占空比为1:1的方波;精码
采用差分放大器、A/D转换器和软件细分,得到绝对式
编码器低10位的二进制角度代码(即2“...2“),三者组
合成24位绝对式编码器的二进制角度总代码,最小分
辨率0.077“。选择的比较电平易受环境变化和使用期
限等因素的影响,导致各码道的转换点改变而出现
乱码、错码,抖动、飞车和不转动等故障现象,经常影响
光电经纬仪的正常使用。传统的处理电路中,模拟器
件使用数量较多,超过了整体译码电路的85%,使处
理电路的运行速度、抗干扰能力、调试过程通用性以
及成本等受到了挑战。鉴于传统编码器处理电路存
在以上弊端,本文提出了改进方法,即采用软件形式
代编码器数据处理电路中的模拟电路,并为数据处理
系统增设参数整定和正常工作两种模式。改进后的绝
对式编码器经HCXO01项目论证,一方面成功地消除了
传统数据处理电路中模拟电路造成的调试复杂、抗
干扰能力差等问题,另一方面实现了新数据处理电路
关键参数的自动获取,有效地避免了手动调试过程中
引人的误差,保证了译码精度,并提高了译码电路的可
靠性。
1.3“硬件电路设计
方位编码器和高低编码器分别安装在垂直轴和水
平轴上。基于中央处理器(DSP)的应用,其数据处理系
统设计在一块电路板上,由光电信号整理电路、A/D模
拟转换电路、.DSP数据处理电路、接口电路.控制软件和
电源等组成。改进后的处理电路原理如图2所示。
方位、高低编码方位、高低编码
器数据采集系统器数据处理系统
@炜明系统@)轴系及和定机构@)码盘@读取狭缝@光敏元件
图 2 改进的处理电路原理框图
Fig.2 Block diagram of the improved processing circuit
1.3.1“数据采集装置
数据采集装置包括照明系统.码盘、狭缝、读数头、
轴系及固定机构等。其中,光源采用白炽灯照明方式。
白炽灯为特制的6V,15W,要求用直流稳压电源供
电,亮度能手动调节;光学系统由非球面镜、柱面镜、转
角楂镜、直角楂镜和固定件组成;码盘是一个环形玻璃
圆盘,共刻印了22圈同心圆码道。从外向里分成精码
道、中精码道和粗码道3个部分;狭缝分为精狭缝和粗
狭缝,精狭缝拾取精码信号和中精码信号,粗狭缝拾
取粗码信叶;读数头采用硅光电二极管,具有防潮,防
腐和稳定等特点;轴系采用密珠轴系,具有较高的回转
精度““。
1.3.2“数裕处理装晃
该编码器灯源采用6V、15W白炽灯,白炽灯发出
的恒光经光学系统变为平行光后,分三路照射到粗码
照明区和两个精码照明区;采用对径读取精码、中精码
信叶,软件上进行数字量相加取平均,消除码盘的工
艺误差、安装的偏心误差和轴系晃动误差;精码采用差
分放大和12位A/D转换器,以准小组分误差和量化
误差。
1)光电信号整理电路:精码差分放大电路和中精
码放大电路完成编码器原始信号的放大,同时对信号
中的直流成分和噪音进行共模处理,进一步提高信号
质量“1。
2)A/D模数转换电路:整理后的精码和中精码信
号均为+5V的交流信号,经过A/D转换电路进行模
数转换,为了保证测角精度和测速反偷的要求,设计中
选用8通道12位A/D转换电路,8个通道转换时间为
1.98ps,高低、方位共40路光电信号,编码器数据采
集和A/D转换时间小于10ps,
3)DSP数据处理电路:DSP数据处理电路是编码
器的核心元件,完成编码器指令接收,进行角度信息处
理,实现与系统的数据通讯的控制功能,电路设计选用
TMS320F2812中央处理器作为核心处理电路。
4)同步采样信号接收及整理电路:为了实现角度
信息与光电经纬仪时间的一致性,电路还设计了系统
同步采样信号接收及整理电路,对系统发送来的采样
信号进行整理处理,处理后的同步采样信号脉认为负
脉冲信号,信号宽度6us。
5)电子调零电路:可以在方位角0“~360°iSfi
角-5“~185“范围内,根据系统指令,能够设置仪器的
绝对零点,数据永仁保存在E2ROM,直到重新设置。
6)任意点清零功能:光电经纬仪可在任意位置完
成手动清零。
7)角度显示:采集的角度数据送至平显控制电
路,实时显示光电经纬仪的高低角和方位角,自检时可
显示编码器系统工作状态和故障。
8)供电电源:包含5V,￡12V3个电源等级,电
源采用满足国军标要求的标准电源产品。
2“改进电路的技术特点
24位绝对式编码器处理电路随码盘形式、码道刻
划、细分方式的不同而各异,但其作用相同,即放大光
电信号.细分,将其转换成自然二进制的角度信息。
2.1“中央处理器的选择
本设计采用TMS320F2812中央处理器作为核心
处理电路,具有处理速度快、在线自检功能和可芯行处
理各种事件等优点“。
2.2“减少调整环节
以往在调整各码道信号的输出幅值时采用电位计
手动调整,信号通过比较鉴帽器后输出1:1的方波信
号。而本改进电路去掉了传统的粗码电位计调整环节
和中精码.粗码信号的比较鉴幅电路,绝对式编码器输
人的所有码道信号全部通过A/D模拟转换器转换,与
传统的处理电路相比,减少了电路的体积,系统的稳定
性和集成度也得到了提高。
2.3“可靠性增加
由于大幅度减少了调整环节和相应的放大器、比
较器,在程序中增加了角度信号的调整和自动补偿,并
且可以在线自检,提高了编码器工作的可靠性。
3关键技术的实现
3.1“信号参数的自动计算与调整
传统的处理电路是通过硬件电路进行比较鉴幅,比
较电平是固定的,导致占空比的变化不能准确反映出轻
角的位置。本改进设计根据A/D转换器采集的码道信
号是连续变换的数字值,DSP处理器利用公式计算出各
码道信号的参数后找出比较电平,再进行调整。以粗砚
As为例,比较电平计算见式(1)。当4s输出的码道信号
幅值发生改变时,比较电平也相应政变,输出的数字信
号占空比始终为1:1,准确反映出轴角的位置,提高了24
位绝对式编码器的准确率和可靠性。
通常,比较电平应设定为各路中精码和粗码信史
峰值的L/3,如图3所示。经过与相应的比较电平比较
后,形成的各路数字信号的占空比为1:1。
3.2“码道自动检查
主控计算机接照通讯协议要求,将各码道信号的
检查指令通过数据通讯分系统转发给编码器分系统,
在线自检方位和高低编码器分系统的码道工作状态,
如果发现故障,能及时报警,并定位故障位置,实现编
码器分系统码道故障的远程诊断。
1)中精码、粗码码道的检查。通过改进电路的
A/D转换器采集各路中精码.粗码的码道信号,检测其
波形是否有高低电平的交替变化。有变化,表明该条
码道工作正常;没有变化,表明该条码道有故障。
2)精码码道的检查。通过改进电路的A/D转换
器采集各路精码信号,检测其波形是否漾足幅值和正
交性要求。满足要求,表明该对精码道工作正常;未满
足要求,表明该对精码道有故障。精码信号参数如图
4所示。
编码器在运行过程中,根据外推功能实时检测方
位、高低编码器分系统的进位情况,如果出现跳变现
象,能及时报警,并通知主控计算机分系统““。
检测依据是误差外推公式,即编码嚣分系统工作
在800Hz的采样频率下,通过前3个采样时刻编码器
分系统输出的角度信息,根据式(2)计算出下一时刻
编码器分系统输出的理论角度值So,用理论值S,减去
编码嗣分系统实际输出的角度值,“差值“大于60“表
明编码器分系统出现进位故障,应及时报警。理论值
计算式为
sass) 。 )
判断依据为理论值减去当前值大于60“。
参数60“即编码器分系统以1(“)/s的角速度转
动,以800Hz频率采样,在一个采样周期内,编码器角
度变化为4.53“(即58个分勘率)。误差外推公式如图
5 Bis.
未来位置点
4.1“旧处理电路的不足
绝对式编码器传统的处理电路由于硬件设计的园
有原因,存在着如下不足“,
1)粗码,中精码和精码在数据处理系统内含有大
量的电阻.运算放大器和可调电位计,在选配精确的电
阻型叶时工作繁琐.任务量大,且电路调试过程过于复杂;
2)调试各精码信号的幅值、对称性和差分放大命
零点漂移需要依赖手动调节电位计和观察示波器的波
形,自动化程度很低,而且引人的信号幅值误差导致后
续译码中的细分误差量偏大;
3)硬件电路的设计无法适应光电码盘信号强度
随环境条件改变和自身老化产生的变化,导致数据处
理电路寿命短,不具有实用性;
4)粗码比较鉴幅电路的输人电平在恶劣环境下
极易被高频噪声干扰,瞿声信号很容易穿越比较电平,
导致源码信号产生跳变。
4.2“新处理电路的优势
绝对式编码器改进型处理电路存在着明显优势:
1)利用软件替代和实现了传统处理电路中的比
较鉴幅电路和精码差分放大电路的功能,简化了硬仵
结构,电路调试简单,有效地避免了模拟器件容差等因
索带来的误差;
2)为数据处理电路增设了工作模式,即参数整定
模式和正常工作模式,该设计可根据气候的变化或在
轻微故障时,整定参数后可参加试验任务;
3)精码道信号的幅值放大采用软件形式,精码
sin6、cos6sinb「、cos0「放大后消除了偶次谐波和共模
量,信号质量好,提高了精码译码的准确性。
新旧型数据处理电路性能比较如表1所示。
表 1 “新旧型数据处理电路性能比较
Table 1 Performance contrast of new and old
processing circuit
5“结束语
相对于传统译码电路的弊端,改进的处理电路存
在着明显优势。本改进设计去除了中精码和粗码的比
较鉴幅器,输人的码道信号全部通过A/D转换器采
集,采用软件昼代比较鉴幅环节并通过软件进行参数
整定和译码工作;采用软件进行重要参数整定与计算,
可根据环境和光源变化采集每路光电信号的电流强
度,计算出不同的比较电平,实时调整数字信号的占空
比,提高了编码器分系统数据处理电路的通用性和参
数调整的精度;凑少了编码器的错码率。本编码器在
多台HCXO1光电经纬仪上的应用未出现过任何放障
或隐悟,经受了野外恶劣环境的考验,并得到推广。
