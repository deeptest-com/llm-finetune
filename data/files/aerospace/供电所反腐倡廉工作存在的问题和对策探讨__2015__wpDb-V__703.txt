供电所反腐倡廉工作存在的问题和对策探讨
本文简要分析了新形势下电力企业反腐倡廉工作存在的困难，指出其症结所在，进而据此提出几点具有针对性的解决措施，以期为我国电力企业的反腐倡廉工作提供部分的理论依据，仅供参考。

新形势 电力企业 反腐倡廉 困难 对策  

1“引“言
星上时间延迟积分CCD(TimeDelayInte-
gration,TDICCD)拼揉成像系统促进了空间遥感
向宽视场、高分辨的方向发展,TDICCD拼接系统
成像的问题也变得复杂多样。首先,在不同的成
像增益和偏置参数下,基于像元校正方法““去除
拼接图像的固定图形噪声和暗电流噬声的校正参
数不同;第二,图像中的脉冲噪声的比例增加;第
三,由于系统工作频率的提高和AD转换精度的
提高,系统的热噪声、随机瞿声均对图像产生影
响。因此,需要在图像处理过程中增加滤波“““「操
作。基于中值的自适应源波器由于不改变图像的
原有炕度,对图像的模糊效应较小,而被广泛采
用。中值滤波能够很好地抑制图像中的脉冲噪
声随机瞿声、单粒子噪声,从而提高图像的信
嗪比。
TDICCD拼接图像的大视场光照条件不均
匀,会导致图像的局部对比度较低,图像中低灰度
区域细节信息不明显;图像的动态范围下降,图像
的视觉效果变差““““。因此,这类囹像的校正、增
强和去瞿极受关注。文献L[1-4]对图像的非均匀
性校正进行了讨论,但是缺少对校正参数自适应
调整的方案设计;文献[5-9]实现了图像的中值滤
波处理,但根据噪声强度选择滤波窗口的设计不
适合实时TDICCD成像系统图像处理,同时,这
些方法处理的像素过多,削弱了图像的细节信息;
文献[10-12J提出分段调整以及直方图加权的图
像增强方式,实现了图像的自适应增强,但是基于
图 像 的直方图统计方法计算复杂,而局部直方图
处理又会产生明显的块效应,不适合TDICCD成
像实时处理系统。
星上TDICCD拼接成像系统图像实时处理
方法需要综合考虑资源、速度、可靠性等因紫。闫
此,一些复杂方法,如频域自适应滤波.小波去噪、
基于统计特性和图像梯度的图像增强算法等均不
适用。本文从工程实践的角度,通过研究图像处
理在空间域的相关实现方法,在充分考虑算法的
自适应性和可靠性的前提下实现了基于图像卜
均匀性校正、图像增强和图像去噪的星上TDIC-
CD图像实时预处理功能。在工程中完成了FP-
GA算法的实现和实验室验证。
2“TDICCD拼接图像实时预处理算法
TDICCD空间拼接成像系统结构框图如图1
所示。该系统采用5片具有6144pixels的
TDICCD完成系统拼接,每片TDICCD采用一片
FPGA进行数据处理。图1中,标号(1)表示宽幅
成像条件下,光照差异导致的图像局部对比度降
低;标号(2)表示TDICCD片间、通道间、像元间
由于电路参数、TDICCD特性、像元响应等不同所
产生的像元非均匀性;标号(3)表示放大电路噱
声.热噪声和空间环境噩声造成的图像降质;标号
(4)表示FPGA内部囹像实时处理的误差。下文
将就这些问题逐项讨论。
图 像 非均匀性(PhotoResponseNon-Uni-
其中:X:是第;个像元的输出码值;X表示图像
像元的平均值;N表示总像元个数。
成像非均匀性校正在工程中主要采用基于辐
射标定的方法。它通过标定片闭和通道间视频处
理命的增益和偏置参数,以及像元响应的不一致
性参数实现校正。TDICCD像元校正采用线性模
型完成。
TDICCD通道内的像元校正方法如下:首先,
获得同一照度下的像元响应借ai(;表示第;个像
元忍表示第}次响应值)。取100组图像做平均
处理(「E[1t,100j]),得到该照度下的像元响应均
值(ai,s;);获取10组不同照度下的像元响应均值
(aivs;)(iE[1,10]);采用最小二乘法进行像元响
应线性拟合;
Q二]2八8十几,
其中:a表示像元响应值;:;表示焦面照度;表示
曲线斜率;r表示曲线截距。像元响应曲线通过
式(2)得出:
获得像元响应曲线a;后,设定标准的像元校
正曲线y。通过线性校正,获取像元校正参数
(&:;,b;),校正公式如式(3)所示:
3 一 &iai 十 此 . (3)
由于暗电流噪声的影晋,像元响应更线不经
过原点。因此,当调节视频处理器的增益和偏署
参数时,需要修正像元校正参数。本文设计了基
于线性模型的像元校正参数修正方法,如式(4);
[一化
其中:(&r,b.,),(&:「,bs「)分别为修正前后的像元
图 像 特征统计的自适应中值滤波算法,用以去除
图 像 中的随机噪声和脉冲噪声。为了降低中值滤
波对图像的模糊效果,本文采用33模板实现滩
波。
“基于行图像特征统计的自适应中值滤波算法
如下;(1)选择当前行图像像素灰度f(i,j)的最
太值Max(i,力和最小值Min(i,j);(2)计算当前
行图像像素“等效最大值“和“等效最小值“的像素
介\娄艾，_童′r己贯订N7I′【_之`)〈禾丨二lZV【′]_i】′lo.(熹阜4荸缀汶昔l蓖之^犬[直，，乡二】|′兰义贲、〕′.言…丨兰丨
前行最大的5个灰度值;“等效最小值“定义为当
前行最小的5个灰度值。数字“5“是根搬嗲声水
FER (3)24 Nuin T Np > Th iF HZ 24 A
行含有脉冲噪声点,需进行源波处理。其中:TA
表 示 判断阎值,本文将Th设定为当前行像素个
数的0.3台。
当前行执行滤波时,首先判断当前像索灰度
是否在“等效最值“范围内,若不在,则保持当前
值,反之,则采用邻域赋值的方法进行赋倌操作。
根据相邻像素的相关性厚理,将四邻域内的
一个非极值点赋给当前噪声点。这种方法可以最
大程度地保持图像灰度的连续性,在FPGA内部
实现较为篓单。当选择横向像素赋值时,水平万
向会有轻微的模糊效果。
该算法充分考虑了TDICCD图像数据以行
为顺序进入FPGA进行实时处理的特点。同时,
对低密度的脉冲噪声和随机嵘声具有很好的抑制
作用。同时,由于不需要对大量图像数据进行滩
波操作,冈此保证了图像细节,降低了图像的失真
度。也避免了中值滤波和自适应中值滤波对图像
的模糊现象。
2.3“图像实时锐化处理
图 像 锐化主要是基于同态滤波器的原理进行
设计的。当一幅囹像从物理过程产生时,它的灰
度值可申两部分组成:(1)人射到观察场景的光源
总量;(2)场景中物体反射光的总量。本文分别称
为照度分量L(.r,y)和反射分量r(.r,y),如式(5)
所示:
空间域的慢变化,代表了图像中的均值和背景。
通过控制照射分量和反射分量,喜少低频(照度)
的贡献,增加高频(反射)的贡献,达到图像增强的
目的。工程实践中,通过二阶拉普拉斯算子获得
图 像 的高频分量;通过3X3的均值源波可以获得
图 像 的照度分量;将二者进行线性组合,即可获得
锐化增强的实时图像。
当图像中噪声水平较高时,采用均值滤波处
理图像获得图像低频分量;否则,采用原始图像。
基于上述策略,本文采用权值调整的均值滤波方
法,通过程序控制中心像素的比重,自适应调整模
糊度。滤波模板如图2所示。滤波模板系数设置
主要是便于FPGA内部实现“移位/加“操作,并
保证算法对噪声有一定的抑制作用。
weighed median filter
基于二阶拉普拉斯算子的图像锐化模型的时
域滤波表达式如式(6)所示:
萨/…〕y)=壁珙十忏暄=
万r十1,3)十fCr一1,y)十Lr,y十1十
模板如图3(a)所示。考虑到图像对角线方
向上的细节信息分量对图像高频分量的影响较
大,采用扩展的8邻域模型,如图3Cb)所示。
为了提高图像的动态范围,并控制图像突变
成分在融合后图像中所占的比例。本文设计了式
(7)的图像处理方法。该方法在图像预处理的基
(a)4邻域Laplace模板 (b)8邻域Laplace模极
(a) Laplace model with (bh) Laplace model with
4-neighbourhood 8-neighbourhood
图 3 基于4/8邻域的二阶Laplace算子模极
Fig. 3 Template of second-order Laplace operator
based on 4/8 neighbourhood
础上进行融合处理,从而有效提高了图像的局部
对比度。
广 Cr,y) 二 AF(Cr,y) 王 BXmin( Ve fray) Th) ,
(7 )
本文设计的图像增强算法经过实验室评定,
取A二0.95,B二0.75。同时,对f(.c,y)中的
数值进行阎值处理,防止出现由图像锐化导致的
图 像 灰度越界和视觉失真。通过对V「f(.rc,y)进
行阎值限制,保证图像的整体动态范围不变。阗
值TAh的选择方法如式(8)所示,[]表示取整
操作。
2.4“图像拉伸
图 像 拉伸主要是为了扩展图像的动态范围。
由于FPGA实时图像拉伸处理是基于单一行图像
的,因此,本文设计了分段线性拉伸方法:在低灰度
和高灰度区域向两侧微调,在中灰度区域保持。拉
伸模型为线性模型,如式(9)所示。这种方法避免
了像素合并,易于实现星上系统的实时图像处理。
为了保证相邻行图像之间的相关性,设定了
每行图像允许拉伸的灰度宽度阙值。
本文设定图像的灰度等级划分采用平均分配
的策略,即满足B=24A二2max(i,j)/3,其中:a一
l,c=21,
的TDICCD图像实时处理的设计方式,完成了
图 4 TDICCD图像
Fig. 4 Real-time processing method of TDICCD based on FPGA
TDICCD图像像元级校正参数初始化在FP-
GA内部RAM中实现。当图像进行像元校正
时,从FPGA内部RAM中读取当前像元的校正
参数(&:,b1)。
当TDICCD相机的增益、偏置参数发生变化
时,需要对像元校正参数进行修正。修正参数通
过标定和计算,在RAM中初始化。
TDICCD图像预处理需要缓存图像,提取图
像行特征并进行运算。FPGA采用双端口Block-
RAM实现,读写同时进行。
图 像 实时锐化模块中,主要利用模板函数完
成图像数据的计算。乘法操作采用数据移位的方
式,在图像邻域计算中,采用交替迭代的方式,即
上一次的运算结果经过修正后得到下一次的运算
结果,这样,可以减少运算时间和资源。各递辑块
的功能参见表1.
在图像拉伸模块中,由于限制了图像拉伸的幅
度,所以该方法对整体图像的对比度和动态范围影
响不大。当图像整体效果偏暗或偏亮时,不能显著
提高系统的动态范围。该方法主要对图像对比度
每片TDICCD采用一片FPGA进行数据处理。
图 像 实时处理的结构如图4所示。
FPGA实时处理结构
实现微调,优点是不会造成像素灰度值合并,可以
更好地保持图像的细节信息,同时,由于扩展的灰
度空间有限,不会丢失行图像间的相关性。
裤1逯辑模块功能一览表
Tab, 1 Functions of logic modules
逻辑块模块功能
递辑1“提取当前行图像灰度的最大值和最小值;
逻辑2寡「琶声盲耆]萼予“′熹^『堇=…`蚕鑫'【最j〔1丁直，′〕T【薹]′'霉'′亲薹蒽氛【最/]、{直"丨兰丨〈J
递辑5“统计每段灰度空间的最大值和最小值;
当像河炕度空间不足时,采用“低灰度区段向
逻辑6下延展5个灰度、高灰度阶向上廷展5个灰
度“的策略;否则保持;
逻辑7袁1}芎熹亨.茎薯饕盲臭事】J萱量宣(〕…辜青′爹i_〈董量_冒`]誓】枭牙'【…,{吏>〕趸统晕…!{J实_戛愕云i重
性会被破坏,产生背景区域的行块效应。
3.2算法占用FPGA资源情况分析
FPGA内部资源是算法实现的最大保证。本
文所述的TDICCD图像实时处理算法在型号为
XC2V6000的virtex2系列FPGA中实现,内部的
模块资源利用情况如表2所示(图像数据按每行
6144pixels的10bits量化;校正参数按6144
pixels的16bits量化!域整参数以64档x8通道
16bits量化)。
在图像锐化和图像拉伸计算中,均采用了像
素移位的方式,这就避免使用乘法器。从图像实
时预处理算法的资源利用情况可以看出,该算法
增加了FPGA内部RAM的使用资源,而对于大
规模FPGA而言,这是能够实现的。算法最终的
资 源 利 用 率 如 下 : RAM:61/144(Block RAM ) )
Slice: 668/33 792; FF: 1 350/67 584; 全 局 时 钟 ;
2/16,
表 2 实时校正模块的ISE线合绪果
Tab, 2 ISE synthesis results of real-time correction module
椿法命11000
Siice/ 个 232 35 126 147
Ry
3.3算法可靠性评估与误差分析
TDICCD图像实时校正算法的各个环节可通
过“递辑7“发送停止指令进行控制。
在像元校正中,像元校正参数设定为0.99一
1。标定错误的情况下,对图像灰度的最大影响深
度为10个灰度级。
图 像 滩波仅对“等效最值“进行自适应滤波,
就是当每行的“等效最值“数量低于阙倩时,则进
行修正。这样虽然会影响该部分图像的真实值,
从而更好地保护了图像内容。
图 像 实时处理的误差分析都是基于理想图像
进行的,而实际工程中,系统量化精度、噪声水平、
光照条件等的限制,无法得到理愚图像。由于对
TDICCD进行实时图像处理是为了改善图像的视
觉效果,故不能用原始图像码值的改变量来衡量
算法误差。从实现过程角度分析,将基于辐射定
标的像元校正误差限制在3个码值以内,图像锐
化和图像拉伸的误差是以改变图像对比度和动态
范围为基础的,主要依靠主观评价。
4“实验室成像效果与结果分析
该算法在星上TDICCD拼接成像系统原理
样机中(实验室环境下)进行了实验验证。
图 5 显示了实验室环境下进行像元校正前后
的单一模块的整体灰度对比(以验证均匀性提高
水平).图5(a)中,三段灰度区域分别代表3片
(a)像元校正前定标图像
(a)Calibration image before carrection
(b)像元校正后的定标图像
(b)Calibration image after correction
tion for TDICCD
滁泼效果。由图6可以看出,囹像的舷冲瞿声和
图 像 斑点得到很好的滤除。
t明处理前图像
(a) TImage before processing
一国咤′||N;:
(HME R
Image after processing
(处理前图(d)处理后图(e)处理前图《处理后图
像边缘像边缙像脑景像背景
(cImage edge (dinage edge (eiuage backetJiage backg-
details details round round
before after details details
processing processing before after
processing processing
图 7 图像锐化的特征和细节
Fig. 7 Characteristics and details of image sharpening
出,图像的边缘模糊像元数量和宽度明显砥少,图
像平坦区像元对比度也有所提高。因此,这种方
式可以有效提高系绕的调制传递函数(MTF)。
在保证图像细节信息的同时,基于图像锐化的处
理方法会使噪声增强,因此,在实际系统中,要保
证良好的信噱比。
通过计算TDICCD实时图像预处理前后的
系统成像性能指标来定量评价图像的实时处理性
能。对于非均匀性搭标,通过使用均匀光照射下
的图像灰度均值代表图像实际灰度来计算灰度图
像的信噪比,如式(10)所示。动态范围如式(11)
所示。其中:SNR是通过对均勾光图像进行多次
测量获得的。/(i,j)表示图像的均值;g(i,j)表
示图像的实际值;M表示图像行数;N表示图像
列数。动态范围是在实际成像中获得的,其中:
“mx表示校正后第5行的最大灰度;n「ma表示校
正后第;行的最小灰度,amx表示校正前第;行的
最大灰度,zm表示校正前第;行的最小灰度.
表 3 列出了TDICCD图像实时处理前后的
23图像实时校正前后的系统性能
Tab, 3 System performances of image before
and after real-time correction
测试项(均值)
测试内容非均匀性信曝比(db)等效动态
(PRNU) (SNR) “ 范 围 (DR)
实时处理前3.41%481.00
Tarra 88 克 。 豇 6 .o6
Tr 178%8 又
系统性能参数.其中:非均匀性表示通道内的非
均匀性对比,包括像元校正参数调整前后的性能
对比;信噬比和动态范围取多次测量的平均值。
由表3可知,通道内的像元非均匀性由原来的
3.41%降低到1.73040;通道间的像元非均匀性由
原来的3.85%降低到1.88%,
5“结“论
本文针对TDICCD拼接成像系统在实时获
取图像过程中存在的成像问题进行了分析讨论;
设计了基于FPGA的星上自适应图像实时预处
理方法。该方法将TDICCD的图像非均匀性校
正、图像中值滤波、图像锐化增强,以及动态范围
调整结合在一起。FPGA内部的流水线结构和并
行逻辑保证了算法的实时性,而基于“移位/加“的
运算逻辑,降低了该方法的运算误差,提高了该方
法的可靠性。
原理样机验证表明,该方法能够有效降低图
像的噪声水乎,提升图像的局部对比度,对边缘有
一定的锐化作用,同时提高了图像的动态范围。
另外,该方法对FPGA资源占用率较低,可靠性
和误差均在容许范围内。
定量实验结果表明,星上TDICCD成像系统
图 像 实时处理结构将图像在典型环境下的输出信
瞿比由48db提高到52db,图像非均匀性由
3.41%降低到1.735%,动态范围乎均提高了6%,
图 像 的对比度显著增强。该算法FPGA硬件可
实现伯较好,速度快,效率高,可以很好地满足工
程要求。
