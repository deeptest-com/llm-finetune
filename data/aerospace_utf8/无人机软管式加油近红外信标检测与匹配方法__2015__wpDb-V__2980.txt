无人机软管式加油近红外信标检测与匹配方法
为了解决无人机软管式加油信标点检测与匹配难的问题,设计了一种近红外信标检测系统,并提出一种鲁棒信标点匹配算法。该系统设计将8个850 nm波段近红外LED灯均匀布置在加油锥套外环,将850 nm带通滤镜和罗技C310摄像头结合,构成近红外信标检测系统;针对干扰点带来的误匹配问题,设计一种基于几何特征约束的信标点匹配算法,该算法可完成远干扰点排除、特征点排序、近干扰点排除和特征点标记。通过各种复杂环境的实验进行算法性能验证,结果表明：信标检测系统检测精度高、可靠性好;信标点匹配算法可以在复杂环境下鲁棒地实现信标点准确匹配。相对位置解算实验结果表明其解算精度较高。

无人机 软管式加油 近红外信标 检测 信标点匹配 几何特征 相对位置解算  

0“引言
现代空中加油对接前主要分为会合阶段和对接阶
段“1。在无人机软管式加油对接阶段,受油机和锥套
之间的相对位置估计是否精确是决定空中加油成败的
关键,一般要求最终插头与锥套之间的相对位置精度
达到10cm级““。视觉导航具有近距离精度高、自主
性强、成本低廉等优点,将其应用于无人机软管式加油
对接阶段具有广阀的应用前景“““,而信标检测系统
的设计以及信标点匹配算法则是视克导航最为关键的
部分,因为检测精度和匹配效果将直接影响导航参数
的解算性能。针对无人机软管式自主空中加油对接阶
段视觉导航中存在的信标点检测与匹配难问题,文献
[5-10]研制了一种主动视觉传感器系统VisNav,但
VisNav需要侬赖特制的传感器,实现难度较高,不具有
通用性,而东数据链路间的通讯易受干扰;文献[11-
14]研制了一种被动视觉传感器系统,但具体的信标检
测以及匹配方法未曾提及;在文献[3,15]中,利用红
外发光二极管布置在锥套上作为倾标,但该算法只适
合于简单背景下的信标检测,且不能克服个别灯有损
坏或者遮挡的情况。
针对上述问题,本文设计了一种近红外信标检测
系统,并提出一种基于几何特征的信标点匹配算法。
通过半物理实验验证了信标检测系统及匹配算法的性
能;通过相对位置解算实验分析了算法的解算精度。
可为无人机空中加油对接阶段视觉相对导航的工程应
用提供借鉴。
1无人机软管式加油近红外信标检测系统
目前的视觉导航多采用可见光信标,但是可见光
信标在远距离时与背景不易区分,畸变较大,易受强光
照及大雾天气干扰,并且特征难提取。考虑到自然场
景中红外源较少,与背景易区分,且红外成像不受天气
及时间的影响,特征点易检测,本文设计了一种软管式
加油近红外信标检测系统,该系统可以完成受油机和
锥套在对接阶段的精确信标检测。
1.1信标设计
实验表明850nm波段直插式近红外LED灯(发
光角度为30?,功率为160mW)可满足空中加油对接
段信标检测与匹配原理性实验的需要。因此,将8个
850nm波段近红外LED灯作为信标点,对称分布在键
套外边缘,键套直径为0.24m,与真实锥套比例大致为
1:2.5,如图1所示。这样设计的信标具有如下优点:
1)布置在锥套外边缘不易被遮挡;
2)8个LED灯对称分布设计,将相对位置解算要
求特征点必须完全一一对应简化为只需正确排序特征
点,简化了特征点匹配计算。
为了尽可能滤除背景中除信标以外的光源干扰,
采用中心波长为850nm.带宽30nm的带通滤镜。
相机选取原则为:相机应具有近红外波段成像功
能。本文选用罗技C310做原理性实验,可实现近红外
成像。
所搭建近红外信标检测系统如图2所示。
由于环境的影响,近红外信标检测系统获取的信
标会出现杂点干扰,信标遮挡、损坏等情况,因此需要
完成信标干扰点排除以及特征点排序等工作,从而完
成信标特征点和真实物理特征点的准确毕配。由于设
计的信标具有先验的几何特征,基于此,信标点匹配算
法的基本思想是:获取信标实时图后,通过高通滤波、
目标分割和质心求取等预处理步骤,精确提取日标特
征点质心,然后通过远干扰点排除特征点排序近干
扰点排除和特征点标记4个步骤实现信标点的准确匹
配,算法原理如图3所示。
图 3 ETFSLA{FbiDCBLukIERA
Fig.3 Principle of beacon point matching algorithm
based on geometric features
2.1图像预处理
获取实时图后,首先运用二维高斯高通滤波器对
图 像 进行滤波,去除灰度分布比较平坦的背景干扰,然
后运用固定阚值分割法“对目标进行分割,再运用途
接分量标注法“标记出各个日标。
针对受油机和锥套之间的相对运动造成的信标点
拖影问题,本文采用灰度值加权算法求取各个月标区
基的质心以及目标区域的面积,该方法相比于传统的
平均值求质心方法结果更精确。
2.2“远干扰点排除
在实时图中,目标区域的质心构成椭圆。考虑到
加油接近过程中受油机与锥套之间相对运动并不是很
大,因此可以用圆近似代替椭圆来排除远干扰点。本
文根据这个先验信息,采用随机抽样一致法(RANdom
SAmpleConsensus,RANSAC)在囹像中寻找支持点最
多的椭圆,从而找出锥套上及其附近的目标点,剔除离
锥套较远的干扰点。
基于RANSAC的远干扰点排除算法实现步骤如
下所述。
1)建立椭圆方程+bpg+cq「+dp+eq+f=0,
b -4c >0, 随 机 札 取 5 点 (p:,gq;) ,; = 1,...,5, 构 造 棺
圆,计算棒蛭方程中的5,c,4d,e小参数,并判断椭国几
何特性是否满足要求,否则重新采点。
2)计算椭圆中心(po,go)以及等效半径R。椭圆
中心的算式为
定义等效半径为
3)依次计算其他点(P:,Q1)与椭圆中心的距离并
与等效半径进行判断,建立如下规则判断其他点是
否为该椭圆的支持点。
是支持点;
不是支持点。
其中,7为一个大于1的阚值,本文选为1.2。记
录初始的5点(Pi,q;),=1,...,5,支持点(P:,@;)以及
支持点个数。
4)重复1)~3),直至达到固定的循环次数,最终找
到支持点最多的榈圆模型对应的初始点以及支持点。
对于视频图像,利用视频的连续性对算法进行改
进,首先在上一帧找到的榈圆附近寻找当前帧榈圆,若
未找到或者是视频第一帧的情况下,再运用以上算法
进行寻找与剔除。整体算法原理如图4所示。
-图4远干扰点排除算法原理图
Fig.4 Principle of far interference point exclusion algorithm
2.3“特征点排序
特征点排序主要是为了对目标点进行顺时针或者
逆时针排序,并指定初始点,从而完成图像特征点与真
实物理特征点的匹配。本文首先求取所有特征点质心
拟合圆的圆心,以此点作为原点0,以与图像x轴相同
的方向作为又轻,以与图像y轴相同的方向作为孔轻,
建立XOY坐标系。记原点0到各特征点的向量为F,
依次求出史与工轴正方向的夹角a,a的取值范围为
0°~360。,不包括360“。a的算式为
式中,x,y表示向量书的坐标。
然后对a按照由小到大的顺序进行排序,即可得
到逆时针排序的特征点序号(在图像坐标系中为顺时
针)。最后,对起始点和最后点重新考察,选择最靠近
工轴的点作为最终起始点。
2.4近干扰点排除
由于信标设计的特殊性,当锥套平面与摄像机光
轴夹角过大时,LED灯附近偶尔会出现干扰点,但干扰
点的大小与真实的目标点相比面积总是较小。如果不
做近干扰点的排除,会导致信标点的错误匹配。
本文设计采用相邻两特征点之间的圆心角8来近
似衡量相邻特征点之间的距离。利用式(3)求出的圆
心角a可求出B。B的算式为
式中,V为剔除掉离锥套较远的干扰点后的目标总
个数。
本文设计依次求出相邻特征点之间的圆心角8i,
判断6:小于桃一阗值时,认为有干扰点存在,剔除掉
面积较小的干扰点,其中,目标区域的面积可在目标分
割环节中得到。
2.5“特征点标记|
在加油过程中,由于环境因素,可能存在个别LED
灯受遮挡或者损坏的情况,此时在特征点标记时,需要
为受遮挡或者损坏的LED灯保留序号,使之不影响后
续LED灯的序号。本文对排除掉近干扰点后的特征
点重新计算圆心角B:(;=1,2,...,n),其中,n表示排
除近干扰点后的特征点总个数,n一8,默认特征点序号
为1,2,...,n。本文根据相邻特征点之间的圆心角大
小,适当地标记特征点序号。具体算法如下所述。
yi =B./45 -1 (5)
式中,round(yi)表示对y:进行四舍五人。求出的A;即
为第i个特征点到下一个特征点之间漏检的信标个数。
本文根据以上算法,最终完成信标特征点的准确
匹配。
3实验结果与分析
3.1实验步骤
本文实验在室外空旷区域进行,实验步骤如下:1)
采用搭建的近红外信标检测系统获取信标图;2)对原图
进行高通滤波;3)对口通滤波后的图像进行二值化;4)
运用灯度值加权法提取二值图像目标质心;5)对二值囹
像中的远干扰点进行排除;6)对剩余目标点排序;7)二
值图像中近干扰点排除;8)标记最终特征点序号。
3.2不同环境下实验
3.2.1“不同距离情况下信标检测与匹配结果
实验在普天室外空旷区域进行。当锥套与摄像机
径向距离不同时,信标检测与匹配效果如图5,图6所
示,图6中每个分图右上角为局部放大图。
最远距离可以达到24m。
3.2.2“不同角度情况下信标检测与匹配结果
实验在普天室外空旷区域进行,径向距离为2m。
当摄像头光轴与锥套平面的垂线不平行,存在一定角
度时,信标检测与匹配效果如图7图8所示,每个分图
的右上角为局部放大图。
以看出,本文的信标检测与匹配算法在角度为45“(径
向距离2m)时依然可以准确地检测到信标,并完成信
标匹配。
3.2.3“不同光线情况下信标检测与匹配结果
实验在室外空旷区域进行。在强光照和明天情况
下,信标检测与匹配效果如图9图10所示,每个分图
的左上角或右上角为局部放大图。
从图9图10可以看出,本文的算法无论是在普天
正对太阳强光照还是阴天弱光照情况下,都可以稳定
准确地实现信标精确检测与匹配,鲁棒性很好。
3.2.4“部分LED灯受遮挡或灯光微弱情况下信标
检测与匹配结果
在实际环境中,个别LED灯存在受遮挡或者灯光
微弱等问题,导致这些LED灯不能被正常检测到,此
时需要利用算法正确标记其他LED灯的序号,才不会
影响到后续的相对位置解算。本文算法在部分LED
灯受遮挡或者灯光微弱情况下检测效果如图11所示,
每个分图的右上角为局部放大图。
图 11 部分LED灯受遮挡或灯光微弱情况下
信标检测与匹配结果图
Fig. 11 Detection and matching results of some beacons
blocked damaged or obscured
从图11可以看出,当个别LED灯不能被正常检
测时,普通算法LED灯序号标记错误,将5号灯标为4
号,后续灯都标记错误,而本文的算法可以正确地标记
出LED灯序号,鲁棒性较强。
4解算结果分析
相对位置解算主要是基于机器视觉原理,利用图
像中检测出的特征点坐标,结合先验信标的关系来实
现信标和摄像机的相对位置求解。目前基于相对位置
解算的算法研究较多,精度都较高““““,因此整个视
觉导航的精度主要取决于信标点检测精度和匹配效
果。本文采用上述信标检测与匹配算法,利用文献
[17]的解算算法进行相对位置解算,完成半物理实验
验证。
半物理实验将锥套固定在一定位置,分别测量相
机光心相对于锥套中心的偏移量x,y以及相机光心与
锥套中心的垂直距离z作为真值。在同一位置拍摄不
同角度照片12张,得到12张图片的解算误差绝对值
的平均值作为这个位置的平均误差值。解算结果如表
1所示。
表 1 半物理实验精度分析表
Table 1 The semi-physical experiment accuracy analysis
表 中 ,角度真值为同一位置给的最大角度值,最小
角度均为0?。
由室外实验的误差分析可知,随着摄像机与锥套
距离的哉小,解算误差减小。24m时,x,y方向位置误
差不超过4cm2方向位置误差不超过1.2m;12m
时,s,y方向位置误差不超过10cm,z方向位置误差不
超过12cm;1m时,随着角度由45“减小为102,x,yJF
向位置误差由7.3cm净小到0.7cm,z方向位置误差
由6.4cm减小到1.3cm。半物理实验表朋本文的信
标检测与匹配算法是相当有效的,解算精度较高。
5“总结
本文面向无人机软管式加油对接阶段视觉导航,
设计了一种基于近红外的信标检测系统,并提出了
一种基于儿何特征的鲁棒信标特征点匹配算法,最终
通过半物理实验验证了系统的可靠性及精度。结果
表 明 ;
1)本文设计的基于近红外的无人机软管式加油
信标检测系统可完成复杂环境下信标点的精确检测,
可靠性高,易于实现,工程应用性强;
2)本文提出的基于儿何特征的无人机软管式加
油信标特征点匹配算法可抗环境干扰,鲁棒性强,在信
标出现遮挡、损坏以及灯光微弱等情况下都能稳定地
实现信标特征点的准确匹配,可满足空中加油需要;
3)在工程应用方面,信标检测效果与摄像机分辨
率以及合作目标LED灯的功率和发光角度相关,提高
摄像机分辨率或者LED灯的功率和发光角度,算法适
用范围将会进一步增大。
