遥感TDICCD相机侧摆成像及定位精度优化
为了满足空间遥感TDICCD相机侧摆成像时对图像定位精度的要求,提出了一种侧摆成像时图像定位精度优化方法.首先,根据遥感TDICCD相机的工作原理计算了星下点成像和侧摆成像2种模式下的行周期值.然后,在分析了侧摆成像会导致一段时间内出现定位误差太大的原因的基础上,介绍了利用记录3种信息：行周期信号上升沿时刻、行同步信号上升沿时刻和二者之间时间差来对图像进行定位的方法.最后,计算了提出方案的定位误差.实验结果表明,在一次成像过程中,产生的定位误差小于地面像元分辨率大小,能满足系统对于图像定位精度的要求.

遥感相机 侧摆成像 图像定位 精度  

1引言
随着空间遥感技术的发展,遥感相机不仅分
辨率不断提高,成像范围也在不断扩大。现有的
CCD器件尺寸已经不能满足大焦面遥感相机的
要求。目前都是采用多片TDICCD拼接技术来
实现高分辨率和大视场的要求“。航天遥感相
机的视场主要受限于光学系统大小,在光学系统
一定的条件下,为了进一步扩大视场,要求遥感相
机在侧摆模式下进行工作“。侧摆时,由于相机
和地面有一定的倾斜角,使得相机可以观测的范
围增大。在侧摆成像模式下,相机曝光期间CCD
电荷转移和地面景物存在相对运动,调制传递函
数会下降,导致图像模糊“1。为了解决这一问题,
通常札用分段异速的方式,即各片CCD在各自的
行频下独立工作。由于各片CCD的行周期之
间存在误差,这样,在一段时间内,累积的误差就
会导致由相机输出的图像中的时间信息和卫星时
闵产生较大的差异。此时会导致图像定位产生较
大的误差。这里所谓的图像定位是指由TDICCD
相机输出的图像来确定对应地面的实际地理位
置,而由图像估算的目标点与实际地面位置的偏
差称为图像定位误差““1。图像定位误差与卫星
姿态、载道及相机对卫星时间的跟踪精度即相机
守时均有关系L。目前对于图像定位的研究多
是针对卫星娅态及轨道所引人的定位误差1,
而对于相机守时引起图像定位误差研究的较少,
本文针对相机守时引人的囹像误差,结合实际工
程研究,介绍了遥感TDICCD相机的组成及工作
原理,着重分析了侧摆成像模式下图像定位存在
的问题,提出一种提高图像定位精度的方法,计算
结果表明,提出的方案能满足系统对于相机图像
定位精度的要求。
2“遇感TDICCD相机成像系统组
成及工作原理
2.1TDICCD相机工作模式
遥感TDICCD相机工作模式可分为星下点
工作模式和侧摆工作模式。侧摆工作模式是指相
机在星下点工作模式的基础上倾斜一定的角度,
该角度称为侧摆角。侧搓工作时相机可获得更大
的视场。但是,在侧摆工作模式下,为了保证拍摄
图 像 的清晰,各片CCD需采用不同的行周期。下
面对星下点成像模式及侧摆成像模式下的行周期
进行计算。
记CCD像元尺寸为a,地面像元分辨率为
GSD,相机焦距为f,转道高度为H.
万为光学系统焦点,p代表焦面任意一点
面任于视在中心点相对于焦点F所成的角度,像
面速度,地面速度us,则
均学径,G为万有引力常数,M为地球质量。可
“见,在卫星轨道高度一定的情况下,ox不变。
星下点成像时成像几何关系如图1所示,
CCD像面上的点ABCD对应地面景物A'B'C’
D,像面上任意一点PYRERYPP’.
Us
设像面任意一点P对应地面P「,则PP满
足关系,
FGSD-芸盛
因此,星下点成像时
T`=“′(亡责二责〉〈1【亭亘'(5)
TDICCD相机侧摆成像时,以向右侧摩角度
b为例,成像几何关系如图2所示。同样,CCD像
面上的点4BCD对应地面景物A「B「C「D「,像面
上任意一点乙对应地面景物乙「。
同,根据三角关系有:
因此,
故
由式(9)可知,侧搓成像时,行周期值既与侧
摆角度有关,也与焦面上像元位置有关。行周期
值设置越精细,相机成像质量也越高,但同时相机
设计也越复杂。在实际工程中,每个像元采用不
同的行周期是不可实现的,对于拼接相机一般每
片CCD采用单独的行屈期即可满足系统对调制
传递函数的要求[。
2.2遇感TDICCD相机工作原理
本文以实际工程中TDICCD相机为例进行
说明。该相机侧携工作时侧摆角为一40一
十40“。图3所示为TDICCD相机组成框图,
TDICCD相机由相机本体和相机控制器组成,相
机本体是TDICCD相机的核心部件,它由10个
成像单元组成,10个成像单元组成完全一样,每
个成像单元包含一片TDICCD,10片TDICCD在
焦平面进行首尾拼接。相机本体的工作由相机控
制器进行控制的,相机控制器为相机本体提供复
位信号、摄像控制信号,行同步信号以及相机的工
作参数,而相机控制器产生的行同步信号由星务
控制系统的秒脉冲进行校正,校正周期为500
ms。TDICCD相机是以行为单位成像,相机工作
时,成像单元1-成像单元10在行周期信号的控制
机输出的图像经由数传系统传回地面。为了方便
判读每一行图像的起始以及该行图像成像时刻的
工作参数,在输出图像数据的时候,同时输出一些
额外的数据,这些数据称为图像辅助数据,包括帧
头、成像单元通道号、图像行号、卫星辅助数据、主
控辅助数据以及工作参数(行周期参数、积分级数
以及增益偏置参数等)等。卫星辅助数据主要用
来标识当前工作过程的卫星工作状态,主控辅助
数据描述的开始摄像后,每个秒脉冲到来时相机
控制器发出的行同步信号的个数,以及秒脉冲上
升沿到来后的第1个行同步信号上升沿的时刻。
其中行同步信号的个数对应辅助数据中的“秒脉
冲时刻对应行计数“,秒脉许上升沿到来后的第1
个行同步信号上升沿的时刻对应“秒脉冲整秒时
刻“以及“行同步相对秒脉许延时计数“。数传数
搬中的帧头.成像单元通道号以及图像行号是由
成像单元生成,帧头用于标识一行数据的开始,通
道号用于识别不同的成像单元,图像行号是用于
标识当前输出的图像时开始摄像之后的第几行。
而卫星辅助数据、主控辅助数据和工作参数是由
相机控制器经由485总线发送给成像单元的。在
成像单元输出数据时,由于工作参数更新频率比
较低,为了减少图像辅助数据卞用的字节数,将卫
星辅助数据、主控辅助数据以及工作参数以16行
为一个循环插人到图像数据中。在获得图像数据
后,可根据摄像时刻卫星时间和TDICCD相机输
出的辅助数据中的时间信息(主控辅助数据)来定
位图像所在的地理位置。因此,TDICCD相机的
时间信息和卫星时间信息之间的差异至关重要,
二者相差越小,图像定位误差越小。卫星时间与
相机控制器时间的时间关联就是卫星发送给相机
的秒脉冲信号,相机控制器与成像单元之间的时
间关联是外行同步信号,相机控制器的外行同步信
号的上升沿由秒脉冲进行校正。因此,成像单元的
时间信息可由外行同步信号的上升沿作为参考.
3TDICCD相机图像定位的实现
由2.1的分析可知,各成像单元实际使用的行
周期信号与工作模式相关。在星下点工作模式时,
各成像单元的行周期均相同,直接采用控制器发出
的行同步信号作为实际使用的行周期信号。当成
像单元在侧摆工作模式时,成像单元的行周期信号
各不相同,此时,各成像单元采用自已产生的内部
行同步信号作为实际使用的行周期信号。内部行
同步信号田成像单元根据RS-485总线接收的行周
期参数值生成。侧摆工作模式下,每片CCD行周
期并不相同,因此实际使用的行周期信号与控制器
发出的外行同步信号之间是异步的。
3.1星下点模式图像定位的实现
在星下点工作模式下,相机实际使用的行周
期信号就是控制器发出的行同步信号,因此每片
CCD“的行周期信号的上升沿时刻就是相机控制
表 1 星下点模式行同步信号上升沿的时刻计算方法
Tab.1 Calculation method for timing of line rising edge in normal mode
相机控制器发出的行同步信号的个数A
秒脉冲上升沿到来后的第1个行同步信号上升沿的时刻8B,B
行周期
3.2“例携成像模式下图像定位的实现方室
侧摆工作模式下各成像单元采用自己产生的
内部行同步信号作为实际使用的行局期信号。内
部行周期的产生受相机控制器发送的复位信号控
[| |
复位信号_____一_丨-一____董__一一一一一一一一
开始摄像信号___一董___|一__丨-_一_一__一一一_一
命发出的行同步信号上升沿时刻。
相机工作过程中,相机控制器发出的行同步
信号上升沿时刻每隔500ms由卫星的秒脉冲校
正一次。在相机控制器中采用1M时钟进行守时
和校时。假设时钟的稳定度为!X10一,那么在
500ms内任一行同步信号的上升沿时刻误差不
会 超 过 Atua 一 500 msX1X10 一 一 50 ps,
星下点工作模式下的最小行周期为80ps.
可以看出,在这种模式下,系统的时间误差已绥小
于最小行周期,因此由其造成的地面定位误差小
于地面像元分辨率,可忽略不计。
此时,相机控制器发出的行同步信号上升沿
时刻,可由数传辅助数据中主控辅助数据以及行
周期计算得出,计算方法如下:
假设相邻两包主控辅助数据第n包和第十
1包主控辅助数据之间的行同步信号共有N=
hnu+l一4u个。第A,行后任一行同步信号的上升
沿时刻t,a计算公式为
tod = Bo + T*i(i =0,1,2---N). (10)
式(10)中参数含义如表1所示。
第包.第n十1包
A, Ant
工
制,因此复位时刻的行周期信号上升沿时刻是确
定的,但各成像单元的行周期信号都是异步的,如
图 4 所示。
因此,在侧摆工作模式下,根据开始摄像时刻
和数传接口中记录的实际执行周期值累加,计算
可得每个行周期信号上升沿时刻。假设开始摄像
时刻为t,行周期为工,则开始摄像后第N个行
周期上升沿时刻t可以表示为,
t=t, +A + (N—1) XT. an
这种设计的缺点在于,由于只有复位时刻的
行周期上升沿时刻是被卫星校正过;其余每个行
周期信号上升沿时刻存在累积误差。假设时钟的
稳定度为1X10一,成像时间为10min,成像10
min后的时钟累积误差Ar为:
At = 10 X 60 s X 107 = 60 ms.
如果当前行周期为80xs,上述时钟累积误差
会造成的地面误差AL为:
从上面的分析中可以看出,同速工作模式下,
行周期信号上升沿时刻每500ms被卫星校正一
次,其所产生的误差在满足系统对TDICCD相机
图 像 定位的要求。在侧摆工作模式下,采用这种
方法计算行周期上升沿时刻,在成像时间较长时
误差较大,已经不宜采用,应对其进行修政。因此
图 5 改进后成像单元行局期上升沿时刻产生方法
Fig. 5 Improved line rising edge timing generate method for imaging unit
号的行号M,行周期信号的行号N,以及行周期
信号(假设其行号为第N行)上升沿到在它之前
的第1个行同步信号的上升沿的时间差AT,
在成像FPGA的程序中,每隔16行将16行
循环中最后一行的行周期信号上升沿时刻添加到
数传辅助数据包中,并且其更新速度与485总线
上的行周期设置指令帧同步。由于行周期设置指
令帧每500ms由主控给成像单元更新一次,因此
行周期信号上升沿时刻的更新速度也是500ms
一次。采用这种办法形成的新辅助数据包格式如
下面重点讲述改进后的计算方法。
在侧摆工作模式时,成像单元1一10的行周
期信号各不相同,为了建立他们之间的相互关系,
成像单元5仍然采用相机控制器发出的行同步信
号作为实际使用的行周期信号,因此它的行周期
信叶上升沿时刻也由相机控制器发出的行同步信
号时刻欧定。而其他成像单元通过485总线接收
来自相机控制器的行周期参数并生产各自的行周
期信号,同时,除成像单元5以外的其他成像单元
(成像单元1,2,3,4,6,7,8,9,10)仍然接收来自
相机控制器发出的行同步信号。
成像单元对于第1、2、3、4、6、7、8、9和10通
道,从开始摄像信号上升沿开始,对相机控制器发
出的行同步信号和当前通道的行周期信号的行号
分别进行计数。同时,每隔16行,利用计数器计
数从16行循环中最后一行的行周期信号(假设其
行号为第N二16n行)上升沿,到在它之前与其紧
相邻的第1个行同步信号(偎设其行号为第M
行)的上升沿的时间差AT,将养称为相位差,如
图 5 所示。这里的n二1,2,3…
采用这种方法需要记录3种信息,行同步信
所示。
从上面的设计说明中可以看出,每个16行循
环中第16行的行周期信号上升沿时刻,可根据辅
助数据计算得出;而其余15行的行周期信号上升
沿时刻,则可根据第16行的行周期信号上升沿时
刻和行周期计数进行推算获得。
对于该定位方法的计算,下面举例说明。首
先做如下假设;
(a)开始摄像后,第N二16z(n一1,2,
3,…小)个行周期信号上升沿时刻为￠5
(b)开始摄像后,行周期信号的行号为NH
周期为T;
(c)开始摄像后,第N个行周期信号上升沿时
行周期信号上升沿时刻计算公式为:
刻所对应的由相机控制器发出的行同步信号的行
号为M,该行同步信导上升沿对应的时刻为5;
采用上述方案后,相机本体的行信号时间信
(d)相机控制器发出的行同步信号上升沿与
息每间隔500ms被相机控制器输人的行同步信
第N个行周期信号上升沿的间隔为AT。
号校正一次。因此,行信号时间信息误差取决于
那么,开始摄像后第N个行周期信号上升沅
相机本体造成的时间误差和相机控制器造成的时
时刻计算公式为:
At,=500ms内110M时钟个数X(时钟稳定度x时钟周期)=
500 ms X 107% X 110 X 10° X 100 X 107° X 1/110 X 10° = 50 ps
At,=500ms内12M时钟个数X(时钟稳定度X时钟周期》=
500 ms X 107° X 12 X 10° X 100 X 10- X 1/12 X 10° = 50 pus
相机本体的时间误差由式计算为50xs,相机
控制器造成的时间误差由式计算也为50xs。因
此,在最小行周期80xs下,一次成像10min时
间内造成的地面误差为
AL = At/ TX GSD 一 50/80 X GSD = 0. 625GSD
因此,采用改进的图像定位方法,在侧搓成像
模式下,一次成像图像定位误差小于地面像元分
辨率,满足系统对TDICCD相机的要求。
4“实验及结果
为了验证定位实现的正确性,在相机系统进
AT,和Nss、Nus、AT。,连续两次输出定位辅助数
行实验验证。验证方法如下(以成像单元1为
据的间隔为Tu,,那么式成立。
例):记成像单元1的行周期值为T,成像单元5
Tw 一 《Nss 一 Ns1 ) XT; + AT, =
的行周期值为T;,成像单元5的行周期也就是成
像单元1接收的外行同步信号。如图6所示,成
实验结果如表2所示,其中外行周期表示相
像单元1连续两次输出的定位辅助数据中外行同
机控制器发送的外行同步信号一个屈期内110M
表 2 侧摆成像图像定位精度结果
Tab. 2 Result of image location
accuracy in scolling imaging mode
外行周期“内行周期外行号“内行号差外行时间/s“内行时间/s“差值时间/us
1b12 4 000 4d7 2e0 212 0.524 356 5 0.524 356 5 0
1b12 4 000 817 440 872 0.212 117 0.212 117 0
1b12 4 000 153d 09d0 19￠6 0.162 113 0.162 113 0
1b12 4 000 1f4a E10 05dc 0. 579 114 0.579 114 0
1b12 4 000 4332 1d40 078￠c 0. 788 833 0.788 833 一 一
时钟个数,内行周期表示异速成像时相机本体实
际执行的行周期一个周期内110M时钟的个数,
5“结“论
外行号和内行号分别为开始摄像后外行周期的个
数和内行周期的个数,差代表成像单元实际执行
针对空间遥感TDICCD相机在侧摆成像模
行周期和该行周朝前最近的外行同步信叶之间的
式下工作一段时间后累积定位误差大的问题,提
时间,用110M时钟个数表示。由实验结果可以
出了一种通过记录3种信息:行周期信号上升沿
看出,计算的差值时间为0,可以验证采用的方案
时刻、行同步信号上升沿时刻和二者之间时间差
是正确的,即提出的改进方案在一次成像时间内
来对图像进行定位的方法。采用该方法后,在一
定位误差不超过地面像元分辨率,满足系统对相
次成像过程中,图像定位误差小于地面像元分
机定位的要求。此外,这种方案与侧摆角度无关,
辨率,满足系统对TDICCD相机定位精度的
同时也适用于星下点成像模式。
