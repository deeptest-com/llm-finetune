GEO非合作目标超近距相对位姿视觉测量
提出一种基于几何特征综合匹配的双目超近距相对位姿视觉测量方法。首先，将失效卫星的矩形太阳帆板作为几何特征，采用综合匹配方法实现了双目图像的高精度匹配，随后基于几何特征指标参数判别和ROI检测方法，实现了卫星太阳帆板特征点组的识别与提取，在此基础上，进一步建立了目标坐标系，通过三维重建完成了超近距阶段失效卫星的相对位姿高精度解算。最后建立了高精度双目视觉超近距相对测量实验系统，结合所提出的综合匹配算法和相对位姿解算方法，完成了动态非合作目标的相对位姿测量实验，实验结果说明所提出的方法具有较好的实时性和较高的精度。

GEO 在轨服务 非合作目标 图像匹配 视觉测量  

0 35 &
针对静止轨道失效卫星在轨延寿是当前在轨服
务技术领域内的研究热点,静止轨道卫星在轨延寿
是通过发射延寿飞行器与失效卫星对接,采用辅助
控制或燃料加注等方式,恢复失效卫星姿态轨道控
能力并延长其寿命““““。如何在超近距离段确定两
航天器之间的相对位姿,进而实现两航天器的对接
捕获,是完成在轨服务任务的关键环节。根据目标
航天器是否具备合作测量特征,相对测量任务分为
合作和非合作两类,合作目标采用单目相机即可获
得相对位姿信息“TY,失效卫星多为非合作目标,其
相对测量技术难度较大。双目视觉系统是常用的非
合作目标相对测量设备,主要原理是通过双目图像
匹配和三维重构解算出目标航天器的相对位姿信
BUY,具有无非线性迭代计算、高精度和高可靠等
优点。许多学者在非合作目标视觉测量方面开展了
相关研究,如祝琨等“提出一种基于双目视觉的运
动目标路踪方法,该方法可以有效路踪运动目标,但
不能精确解算出运动目标的相对位置威态信息;徐
文福等“1提出一种采用边缘检测和Hough变换相
结合测量的方式,通过检测直线识别目标卫星,但是
Hough变换计算量大,实时性较差,所以这种方法很
难应用于工程实际;徐培智等「对该方法做出改
进,测量目标更加具体化,并采用物理仿真进行验
证,侄该方法并未考虑姿态翻滚等测量条件。除此
之外,上述研究内容都没有考虑测量中图像匹配问
题,而且实时性与精确性有待提高。
本文针对静止轨道失效卫星超近距相对测量任
务需求,提出一种测量矩形目标的双目视觉测量方
法。研究中将矩形太阳帆板作为测量目标,采用综
合匹配修正算法进行全局匹配,结合空间几何特征
筛选方法识别矩形目标,最后利用双目视觉测量算
法解算出相对位姿信息。该方法考虑了非合作目标
识别,空间复杂环境干扰,图像匹配问题,以及卫星
姿态翻滚等问题。为验证方法的合理性和有效性,
本文建立了双目视觉测量地面实验系统,在目标航
天器存在相对位置和姿态运动的条件下,验证了本
文所提出的测量算法的精度和稳定性。
1双目视觉测量数学模型
如图1所示,延寿飞行命安装有双目相机和对
接机构,失效卫星带有矩形太阳帆板,两颗卫星保持
在超近距离阶段。
为方便研究,结合相机成像针孔模型(Pin-Hole
Model)对系统坐标系进行定义,如图2所示,系统中
包含坐标系有:追踪卫星本体坐标系0,-XYZ,,
其中02z为卫星飞行方向,0指向地心方向,
0X,由右手定则确定;图像坐标系(U,V),表示以
象素为单位的图像坐标系坐标;左相机坐标系为0.
-X:.Z。,0。为摄像机光心,X.,Z.与成像平面坐标
系中的x,y轴平行,Z.为摄像机的光轴与图像平面
垂直二〔)
假设世界坐标系0,-X,Y,Z,与左相机坐标系
重合,图像坐标系中一点p=[v0]“,与该点在目
如下式所示:
式中:矩阵Ms,s为相机内参数矩阵,由相机的焦距
以及光轴偏移量等因紫决定。My,为相机外参数矩
阵,反应了左右两个相机之间的旋转平移关系。内
外参数矩阵可以通过相机标定“获得。
2“特征点匹配与识别
2.1“特征匹配与识别基础
针对失效卫星本体上的矩形太阳能帆板,特征
点识别与匹配部分的任务目标为从众多特征点中筛
选出矩形帆板四个顶点。
首先,本文采用子像紫级角点提取方法获得
目标信息,因为角点提取方法速度快、角点定位
准确,能够满足测量实时性和高精度要求。子像
素级角点提取使用Harris角点探测器和高斯更
面拟合方法相结合“。提取的角点中包括矩形
太阳帆板四个顶点以及其他干扰角点,将这些角
点作为特征点。
受姿态翻滚影响,特征点识别必须在三维空
间中进行,所以需要通过三维重建获得特征点三
维空间坐标,而特征点匹配是三维重建的必要
条件。
2.2“特征点匹配方法
在轨延寿任务中,双目相机前向平行安装,图像
尺度变化不明显,因此本文仅考虑两帽图像之间存
在平移和小角度旋转关系的图像匹配。特征点匹配
常用归一化灰度互相关匹配方法(NCC)方法,并采
用视差梯度方法和极线约束准则去除误匹配1。
如图3所示,左右两张图片分别为双目相机同
步采集的图片;在图片中,安装有标靶的三轻转台模
拟失效卫星,标靶上矩形白纸近似代替太阳帆板。
图 片 中圆国为Harris角点,直线连接左右图像中两
点,分别表示三种方法计算出的特征点的正确匹配
关系。
匹配数目少。本文据此进行改进:首先以改进的
NCC方法为基础得到多种匹配选择,其次将极线
约束作为匹配准则进行匹配筛选,最后根据视姬
梯度方法消除误匹配,最终得到较好的匹配
结果。
2.2.1NCC匹配方法改进
NCC方法计算量小,实时性高,并且能够有效
去除光照变化对匹配的影响““。但是NCC方法基
于灰度相关,容易受到相似特征或环境因素影响而
产生虚假匹配,或者忽路掉大量正确匹配。因此提
出备选匹配点方法,首先计算两帽囹像中所有点的
归一化相关系数,公式为:
S(x,y) =
式中:w是相关窖口大小,h和h分别为两幅待配
准图像中特征点相关窗内像素的灰度值,7和n分
别为相关窗口内灰度均值。
在NCC方法中将参考点最大相关系数对应的
特征点作为其匹配点,然后进行双向一致性检测,若
互为匹配点则被认为是正确匹配。结果如图3(a)
所示,存在误匹配多,匹配缺失问题,因为只应用当
一化相关系数最大项,并未考虑其他相关性较大的
点,本文把相关性较大的点作为备选匹配点以增加
匹配选择性。
具体方法为:计算出每个参考点所有相关系数
中与最大相关系数的比值超过80%的项,将这些项
对应的待匹配点作为备选匹配点,每个参考点都可
以得到一组备选匹配点;当参考点与相关系数最大
的待匹配点无法通过左右一致性检测时,可以在备
选匹配点中继续进行左右一致性检测;依次计算出
所有符合左右一致性的匹配对。按照备选匹配点方
法,每个参考点都增加了找到匹配点的可能性,甚至
一个参考点与多个待匹配点匹配,需要进一步确定
正确匹配关系。
2.2.2“极线约束准则去除误匹配
对于所有符合左右一致性检测的匹配对,通过
极限约束准则进一步判定。极平面为空间点P与
摄像机光心Cu,C.构成的平面,极线为极平面与左
右摄像机平面的交线epu,e,p,。已知点p位置,相
应的匹配点p,一定在极线e.p,上,这种关系称为极
线约束。极线约束关系为
矩阵F为基本矩阵“,是极线几何的代数表示
形式,由于相机的内参数矩阵4,、4.,以及两相机
之间的旋转矩阵R,MIPBERET,已知,则极线方
程可以写为,
$为左右两相机之间平移矩阵的反对称矩阵,
申左右两相机之间的平移矩阵定义。
则基本矩阵F=4r“SR,4Ar“,只包括双目相机的内
参数和结构参数。将所有符合左右一致性检测的匹
配对进行极线约果检测。通过极线约果准则可以消
除部分误匹配,但仍可能存在部分误匹配,或者一个
参考点与多个待匹配点匹配的情况,需要进行最后
一步检测。
2.2.3“视差梯度检测得到最终匹配
对所有通过极线约束的匹配对进行视差梯度匹
配检测,去除误匹配。视差梯度方法是两对对应点
之间相容程度的一种测度,能够根据视差原理消除
部分误匹配““1。
左图像中的点A(a,,a,),Bi(b.,b,),与右
图 像 中的点4.(a。,ay),B.(5,5,)是两对匹配
点。则这两点的视差分别为;
h,《,连线的中点为4。,B,,B,连线的中点
NB,,A,MB,之间连线的矢量为4,。,视差梯
度为
图 像 中距离较近的角点视差相似,视差梯度
可以作为这种相似性的评价指标,视差梯度越
小,则相似性越高。视差梯度方法可以分为如下
步骤;
(1)计算一对对应角点和其他所有匹配角点的
视差梯度之和,视差梯度和表征一对匹配点同它邻
域内的对应匹配的相容程度。
(2)对视差梯度和排序,得到最大值梯度和
d,.,最小梯度和4,,,判断是否满足4.../a,一n,
不满足则去掉d对应的匹配角点。
(3)采用递归搜索方法,继续求梯度和,最
终当所有对应匹配都滢足阙值要求时,即可停止
循环。
如图4所示,改进后的匹配方法正确率得到很
统计如表1所示。
表 1 正确匹配率统计
Table 1 Matching accuracy results
匹酒方法NCC视差梯度极线匹配绊合方法
正确匹配数4.84.33.928.5
总 匹 配 数 30.4 30.4 30.4 30.4
正 确 匹 配 率 /% 15.7 14.1 12.8 93.8
统计结果说明,绊合匹配方法不仅能够有效剧
除误匹配对,而上能够修正误匹配,提高匹配精度。
2.3“特征点识别方法
2.3.1“三维空间帆板检测
已知特征点在两幅图像中的对应关系,以及双
目相机的内外结构参数,根据双目视觉测量模型,可
以对特征的进行三维重建。三维重建后,可以在三
维空间中检测目标特征点。太阳帆板在三维空间中
儿何构型为矩形,可以利用矩形的基本性质对角点
进行检测,如短形四个顶点共圆,四个内角都是直角
都是区分矩形的重要挡标“1。
(1)共圆度指标检测。矩形顶点共圆,顶点到
矩形形心距离相等。根据四点坐标计算四边形形心
P,,设任意特征点P:BP,的距离为4:,定义其四
个检测点的共圆度指标计算公式为:
考怀到在形心提取过程当中可能相对理想的形
心存在一定的偏离,因此设定共圆度指标阎值。符
合阗值的矩形顶点进行下一步检测。
(2)直角度指标检测。矩形内任意三点构成直
角三角形,其三边符合勾股定理。计算矩形内四个
三角形的三边长度,取最大值作为斜边r:,其余两
Mar,Mr,作为直角边,按照下式计算直角度指
标。
同样设定直角度指标阎值,通过阎值的四边形
可以认为是矩形。共圆度指标和直角度指标计算过
程简单,计算量小,可快速排除等选出矩形顶点。
2.3.2序列ROI检测
ROI(RegionofInterest)为感兴趣区域,用于检
测运动目标,本文设计了序列ROI检测方法对特征
识别进行优化。通过序列ROI检测方法,可以实现
目标跟踪,目标连续性验证,同时提高系统实时性。
下一帧图像的检测区间,特征点检测只在ROT区域
中进行,从而降低了特征点检测计算量,如图5所
示。当下一帧图像完成特征点检测后,需要进行两
个工作:(1)跟踪目标连续性验证。通过恭间匹配,
比较连续两帧的目标矩形相似性,如不相似,则重新
进行全局特征点检测;若相似,则继续进行下一步。
(2)重新计算ROI,并传递给序列中下一帧图像。
ROI设定一方面可以实现对目标的跟踪检测;另一
方面也可以排除干扰因素,减小计算量提高实时性。
3“双目位姿测量算法
由于摄像机固定在航天器本体上,所以摄像机
坐标系与追踪航天器坐标系之间的旋转平移矩阵都
是常数矩阵。因此,双目位姿测量算法的主要任务
就是,求取摄像机坐标系与目标航天器坐标系之间
的相对位置和相对姿态转移矩阵。追踪卫星本体坐
标系为0,-X,7:.Z,,目标本体坐标系为0,-
XYZ,目标坐标系三轴方向由目标矩形构型定义。
如图6fia,P,P,Py,Py分别为检测得到的
矩形帆板四个顶点,P,P:,Ps,Ps代表该四点在追
踪卫星坐标系0,-7,Z,下的坐标,则矩形形心P:
EO-XYZ下坐标为:
设点Ps为目标卫星坐标系0,-XYZ的原点,
则Ps在目标坐标系中的坐标为2=[0,0,0]。
根据追踪卫星和目标卫星之间坐标系的转换关系:
P坐标值为追踪卫星和目标卫星之间相对位
置的近似佼计值,相对位置矩阵丫表示为:
追踪星坐标系日标星坐标系
图 6 坐标系示意图
Fig. 6 Coordinate system graph
相对姿态信息需要进一步定义目标坐标系三轴
方向。首先定义0.Z,轴方向,0,Z,轴为过Ps点,且
与PP,P,、Ps所在平面相垂直的单位矢量Z。
然后定义0,7,轴方向,由Ps作P:P的垂线,交
ZBP,P,TAP,EPP,方向定义为0方向。
点P,在0,-XT7Z,下坐标Po可由空间直线和平面
的关系求得,P,P,所在直线方向向量为[a,5,c],
则P,P所在直线为:
j萼刑夏鄄2=〉'川菖y2=器′′lr'丁z2=鬣(14)
过点=[史,兰,少]且与向量[a,b,c]垂直
的平面是:
a(x, — x5) +b(y, 一 加 】 + c(zn 一 办 ) = 0
(15)
联立式(14)、(15)可以解算出:
OY,轴由PP,方向单位矢量乙定义:
最后,根据右手定则确定0X,JE,0X,的单
位矢量一为0,Z,MOY方向矢量的叉乘:;
X=ZxY (18)
求解出目标卫星三轴的单位矢量后,可以得出
追踪卫星和目标卫星之间的姿态转移矩阵的估
计值:
R=[Z", 7, X"] (19)
将该姿态转移估计矩阵,根据(3-2-1)欧拉
角表示方法转换,可以计算出追踪航天器相对于目
标航天器的三个姿态角。首先绕Z轴转动,即滚转
角p;然后绕I轴转动,即偏航角0;最后绕X轴转
动,为俯仰角!。姿态角(9,p,4)根据下式计算;
至此,可以通过双目测量及其算法确定相对
位姿信息。由于存在特征点提取等实验误差,所
以计算得到的姿态估计矩阵与理论值存在一定
偏差,相对位姿数据也存在一定误差。为减小数
据误差需对测量数据进行平滑处理,首先对测量
数据初步平滑,再采用拟合方法二次平滑。综合
这两种平滑方法,在造成少量延时的情况下,位
姿测量平滑效果明显。
4“超近距测量实验与分析
4.1“地面实验系统构成
为验证本文所提出的特征点提取方法和位姿解
算算法建立了视觉位姿测量实验系统,系统主要由
双目视觉相机、三轴平动台、三轴转台、靶标、处理计
算机组成。相机采用嘉恒中自OK_AM1330黑白
LVDS数字定焦CCD摄像头,图像采集卡采用嘉恒
中自的OK_LV20A数字图像采集卡,镜头采用
COMPUTAR 公 司 的 M1330 , 焦 距 8 mm, OK _
AM1330有效像元输出1300x1024,焦距8mm,帧
频8~24Hz可选。
双目相机安装在三轴平动台上,标靶为矩形面
板,贴有矩形白纸近似代表太阳帆板,同时标靶上贴
有其他不规则干扰构型,标靶安装在三轴电动转台
上。在实验过程中,三轴平动台模拟交会逼近过程
当中的延寿飞行器的相对轨道运动,标靶所在的三
轴转台模拟延寿飞行器逼近过程当中目标卫星的低
速相对姿态运动。实验系统具有高精度,二轴移动
台电机每脉冲移动0.0025mm,三轴转台每脉冲转
动0.000075“。
地面实验系统的控制软件由C++编译,通过
MFC生成控制界面,可以编程实现本文中的图像预
处理,特征点提取,图像匹配,位姿解算等算法。通
相对位姿测量数据,将电机运动作为标准值,与测量
值相比较可以进行误差分析。
4.2“超近距相对位姿测量实验
根据超近距任务要求,将延寿飞行器与失效卫
星之间的相对距离设定在0m至4m之间,三轴移
动台可以在量程内进行相对移动以测量数据。
4.2.1“相对位置测量实验
设定三轻移动台与标靶之间相对姿态初值为
(0.0°,0.0°,5.0°),测量过程中标靴无旋转,三轴移
动台分别在三轴方向做匀速线性运动,速度为
7.5mmxs。三轴移动台在乙轴方向运行450mmi;在
Y轴方向运行200mm;在Z轴方向运行1000mm,
测量结果如图8所示。
运动中相对误差在0.2mm以内;Y轴累计误差在
7mm左右,约为3.5外,每一帧数据相对误差在
0.1mm以内;Z轴绝对误差为30mm左右,约为
3.0%,每一帧数据相对误差在0.5mm以内。以上
测量结果说明,三轴移动测量数据精度较高,误差较
小,该方法能够提供比较稳定的相对位置测量数据。
4.2.2“相对姿态测量实验
三轴移动台与标靶之间相对位置初值为
(100mm,-100mm,2000mm),测量过程中三轴移
动台无运动,转台以0.225(。)/s做匀速线性运动,
分别在偏航角、俯仰角方向转动15“。测量结果如
图 9 所示。
误差保持在0.1“以内。俯仰角累计误差接近于
0.2。,约为1.3%;相对误差在0.2“以内。测量结果
说明本文方法测量的姿态角转动误差较小,能够提
供比较稳定的相对姿态测量数据。
4.2.3“相对运动中速度测量实验
分别对三轴移动台在三轴方向上的运动速度,
以及三轲转台在偏航角和俯仰角方向的角速度进行
测量,滚转角受实验条件限制没有测量。结果如图
10 ~11,
图 10 中曲线分别为三轴测量速度,直线为标准
值7.5mm/s,Z轴速度测量结果误差较小,Z8
速度测量结果误差偏大,三轴测量数据基本与标准
值7.5mm/s一致。图11中曲线为两个姿态角速
度测量结果,直线为标准值0.225(“)/s,角速度测
量曲线在0.225(“)/s左右震荔,总体保持平稳。
通过分析本文算法得知,测量中存在的误差主
要来源于以下三个方面:(1)相机标定误差,造成相
机内外参数不准确,影响特征点三维重建精度。
(2)特征点定位精度误差,对姿态角影响较大,子像
素级变化可能造成姿态角1“左右误差。(3)BF
翻滚误差,容易引起特征点构型变化,不仅引人误差
而且容易使矩形检测奇异。在今后工作中应从这儿
个方面人手解决误差问题,进一步提高测量精度。
缇合分析实验结果,在超近距离测量时,本文的
相对位姿测量方法对于空间干扰因素等问题具有较
好的抗干扰性,对于航天器之间发生相对运动.转动
时测量,以及三轴速度测量结果精度高,稳定性好,
能够达到地球静止轨道在轼服务要求,为非合作目
标测量提供相对导航数据。
5“结“论
本文针对静止轨道失效卫星超近距相对测量任
务需求,提出一种针对非合作目标的双目测量方法。
忆元历一思伟闵月素十扒反异芊头四何出朱计一,
采用综合匹配算法进行特征匹配,显著提高了全局
匹配的正确率;针对矩形目标,提出在三维空间中根
据几何特征筛选方法进行识别,有效去除各种干扰
因素;并采用ROI设置实现了跟踪测量;最后根据
双目视觉测量矢量转换算法解算出相对位姿信息。
本文根据地面实验仿真系统对测量方法进行验证,
在超近距离测量条件下,三轴运动中相对误差在
0.2mm以内,姿态角转动相对误差在0.2“以内,速
度误差在0.3mm/s以内。实验结果说明所提出的
测量方法具有较好的实时性和精度,能够满足对
GEO失效卫星在超近距离的相对测量要求。
